import{a as T,f as w,u as $,_ as x}from"./fetch-7WrayJG1.js";import{z as e,a as C,t as S,p as B,b as j,f as A,g as R,e as V,_ as q}from"./UsePagination-AMK_SP_b.js";import{y as z,x as F,d as h,z as H,p as N,j as Q,o as f,w as d,e as m,f as _,A as b,g,u as a,B as I,h as E,_ as k,r as J,c as K,b as M}from"./index-DsSu0Rud.js";import{_ as O}from"./Table-CnvyLu7P.js";import{u as U}from"./UseRelativeTime-D0NwtcMW.js";const G=e.object({block_timestamp:e.number(),tx_hash:e.string(),block_number:e.number(),operator:C,amount:e.string()}).transform(t=>({blockTime:S(t.block_timestamp),txHash:t.tx_hash,blockNumber:t.block_number,operator:t.operator,amount:parseFloat(t.amount)})),L=e.object({distributions:e.array(G),count:e.number(),page:e.number(),total_pages:e.number()}).transform(t=>({distributions:t.distributions,count:t.count,page:t.page,totalPages:t.total_pages})),W=e.object({...A,...j,...B});async function X(t,o){const p=R(),{chain:n,...l}=W.parse(t),i=T(l),r=await w(`${p}/v1/revenue/${n}/distributions${i}`,void 0,o==null?void 0:o.signal);return L.parse(r)}function Y(t){return $({queryKey:["revenue-distributions",t],queryFn:()=>X(F(t)),placeholderData:z})}const Z={class:"end"},tt=["href"],et={class:"end"},st={class:"end"},ot=["href"],nt=h({__name:"TableDistributions",props:{distributions:{},count:{}},emits:["page"],setup(t,{emit:o}){const p=o,{page:n,onPage:l}=V(),i=H(n,200);N(i,s=>{p("page",s)});const{relativeTime:r}=U();return(s,u)=>{const v=q,D=x,y=O,P=E;return f(),Q(P,{title:"Distributions"},{actions:d(()=>[m(v,{"items-count":s.count,"items-per-page":10,page:a(n),onPage:a(l)},null,8,["items-count","page","onPage"])]),default:d(()=>[m(y,{rows:s.distributions,columns:["Operator",{label:"Amount",align:"end"},{label:"Time",align:"end"}]},{row:d(({item:c})=>[_("div",Z,[_("a",{target:"_blank",href:`https://etherscan.io/address/${c.operator}`,onClick:u[0]||(u[0]=b(()=>{},["stop"]))},g(c.operator.ens||("addressShort"in s?s.addressShort:a(I))(c.operator.address)),9,tt)]),_("div",et,[m(D,{"show-zero":"",value:c.amount},null,8,["value"])]),_("div",st,[_("a",{target:"_blank",href:`https://etherscan.io/tx/${c.txHash}`,onClick:u[1]||(u[1]=b(()=>{},["stop"]))},g(a(r)(c.blockTime.getUTCTimestamp())),9,ot)])]),_:1},8,["rows"])]),_:1})}}}),at=k(nt,[["__scopeId","data-v-1ea0f9ab"]]),it={class:"dashboard"},rt=h({__name:"Revenue.page",setup(t){const o=J(1),{isFetching:p,data:n}=Y(K(()=>({chain:"ethereum",page:o.value,per_page:15})));return(l,i)=>{var r,s;return f(),M("div",it,[m(at,{distributions:((r=a(n))==null?void 0:r.distributions)??[],count:((s=a(n))==null?void 0:s.count)??0,loading:a(p),onPage:i[0]||(i[0]=u=>o.value=u)},null,8,["distributions","count","loading"])])}}}),mt=k(rt,[["__scopeId","data-v-bcd3639b"]]);export{mt as default};
