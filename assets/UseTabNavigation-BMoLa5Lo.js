import{aG as P,aB as O,aJ as j,aK as M,at as y,aL as Q,an as h,ae as S}from"./index-DAmMJpTU.js";const _=new WeakMap;function k(n,m,g={}){const{mode:o="replace",route:f=P(),router:c=O(),transform:r}=g;let u=e=>e,i=e=>e;typeof r=="function"?u=r:r&&(r.get&&(u=r.get),r.set&&(i=r.set)),_.has(c)||_.set(c,new Map);const s=_.get(c);let a=f.params[n];j(()=>{a=void 0});let l;const q=M((e,p)=>(l=p,{get(){return e(),u(a!==void 0&&a!==""?a:y(m))},set(t){t=i(t),a!==t&&(a=t===y(m)||t===null?void 0:t,s.set(n,t===y(m)||t===null?void 0:t),p(),Q(()=>{if(s.size===0)return;const w=Object.fromEntries(s.entries());s.clear();const{params:b,query:d,hash:R}=f;c[y(o)]({params:{...b,...w},query:d,hash:R})}))}}));return h(()=>f.params[n],e=>{a!==u(e)&&(a=e,l())},{flush:"sync"}),q}const N=new WeakMap;function G(n,m,g={}){const{mode:o="replace",route:f=P(),router:c=O(),transform:r}=g;let u=e=>e,i=e=>e;typeof r=="function"?u=r:r&&(r.get&&(u=r.get),r.set&&(i=r.set)),N.has(c)||N.set(c,new Map);const s=N.get(c);let a=f.query[n];j(()=>{a=void 0});let l;const q=M((e,p)=>(l=p,{get(){return e(),u(a!==void 0?a:y(m))},set(t){t=i(t),a!==t&&(a=t===y(m)?void 0:t,s.set(n,t===y(m)?void 0:t),p(),Q(()=>{if(s.size===0)return;const w=Object.fromEntries(s.entries());s.clear();const{params:b,query:d,hash:R}=f;c[y(o)]({params:b,query:{...d,...w},hash:R})}))}}));return h(()=>f.query[n],e=>{a!==u(e)&&(a=e,l())},{flush:"sync"}),q}function x(n,m,g,o){const f=O(),c=(o==null?void 0:o.tabParamName)||"tab",r=k(c,n[0]),u=S(-1);return h(r,i=>u.value=n.findIndex(s=>s===i),{immediate:!0}),h(u,async(i,s)=>{var e;i===-1&&(i=0);const a=s===-1||s===void 0||r.value==="",l=f.currentRoute.value.query,q=n[i];(e=o==null?void 0:o.beforeNavigate)==null||e.call(o,q),await f.push({name:m,params:{[c]:n[i],...Object.fromEntries(Object.entries({}).map(([p,t])=>[p,String(t)]))},query:l,replace:a})},{immediate:!0}),{tabActive:r,tabActiveIndex:u}}export{x as a,k as b,G as u};
