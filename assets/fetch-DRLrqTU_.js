import{r as v,a as c}from"./Number-BVeBD89l.js";import{d as m,ae as w,c as f,an as g,b as o,o as r,ay as i,f as S,g as d,u as y,_ as b}from"./index-Ci__0x6w.js";const k={class:"async-value"},I={key:0,class:"symbol"},j={class:"value"},B={key:1,class:"unit"},U={key:2,class:"symbol"},$="|/-\\",C=m({__name:"AsyncValue",props:{value:{default:null},type:{default:null},precision:{type:[Number,Function],default:2},showUnit:{type:Boolean,default:!0},showSymbol:{type:Boolean,default:!0},showZero:{type:Boolean,default:!1}},setup(e){let t=0,a=0;const n=w("|"),u=f(()=>typeof e.value=="string"?e.value:e.value===1/0?"∞":e.value===-1/0?"-∞":e.value?v(e.value,typeof e.precision=="function"?e.precision(e.value):e.precision,e.type??""):e.value===0&&e.showZero?"0":e.value===null||e.value===void 0?n.value:"?"),h=f(()=>e.precision===1/0||!e.type||typeof e.value=="string"?"":!e.value||!isFinite(e.value)?e.showUnit?c(0):"":c(e.value));return g(()=>e.value,s=>{if(clearInterval(a),t=0,s)return;const l=()=>{t=(t+1)%4,n.value=$[t]};a=window.setInterval(l,250)},{immediate:!0}),(s,l)=>(r(),o("div",k,[s.showSymbol&&s.type==="dollar"?(r(),o("span",I," $ ")):i("",!0),S("span",j,d(y(u)),1),s.showUnit?(r(),o("span",B,d(y(h)),1)):i("",!0),s.showSymbol&&s.type==="percentage"?(r(),o("span",U," % ")):i("",!0)]))}}),p=b(C,[["__scopeId","data-v-c17e757f"]]),O=e=>{const t=new URLSearchParams(Object.entries(e).filter(([a,n])=>n!=null).map(([a,n])=>[a,n.toString()])).toString();return t&&`?${t}`};class E extends Error{constructor(t,a){super(a),this.status=t}}async function F(e,t,a){const n=await fetch(e,{method:t?"POST":"GET",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t),signal:a});if(!n.ok)throw new E(n.status,`Fetch error ${n.status} for URL: ${e}`);return n}async function R(e,t,a){return await(await F(e,t,a)).json()}export{p as _,O as a,R as f};
