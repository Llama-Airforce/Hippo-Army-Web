import{_ as D,a as F}from"./TabItem.vue_vue_type_script_setup_true_lang-By3qrmS3.js";import{_ as U}from"./DashboardHeader-CBTrQLFq.js";import{_ as j}from"./KPI-Do90NnUD.js";import{_ as S}from"./fetch-CzIKldv6.js";import{u as H,p as K,a as Q}from"./util-ecCbvgwE.js";import{d as g,ae as G,al as B,c as y,b as P,o as l,u as e,f as h,_ as b,j as _,aC as O,aD as q,t as J,az as M,w as d,e as o,g as $,i as W,h as X,aE as Y,aF as Z,aG as ee,aH as oe,aB as I,aw as N}from"./index--6aQy66t.js";import{_ as ae}from"./Table-B1fGGnP3.js";import{u as te,_ as ne}from"./UsePagination-BUVeOBbV.js";import{u as se}from"./UseSort-CbcbNk78.js";import{a as re}from"./UseTabNavigation-EsgH_Q1K.js";import"./Tooltip-ZsHLl0Z0.js";import"./Number-JCDnKITR.js";import"./timestamp-D1DOFXxn.js";import"./Pagination-vgbH7lYO.js";const le=["src"],ce=["href"],ie=["src"],ue=g({__name:"TokenIcon",props:{chain:{default:"ethereum"},address:{},clickable:{type:Boolean,default:!1}},setup(t){const a=G("");function u(s){return`https://cdn.jsdelivr.net/gh/curvefi/curve-assets/images/assets${t.chain!=="ethereum"?`-${t.chain}`:""}/${s}.png`}const n=()=>{a.value="https://curve.fi/images/default-crypto.png"};B(()=>t.address,s=>{a.value=u(s.toLowerCase())},{immediate:!0});const c=y(()=>{switch(t.chain){case"arbitrum":return`https://arbiscan.io/address/${t.address}`;case"ethereum":default:return`https://etherscan.io/address/${t.address}`}});return(s,i)=>s.clickable?(l(),P("a",{key:1,target:"_blank",href:e(c)},[h("img",{class:"token",src:e(a),onError:n},null,40,ie)],8,ce)):(l(),P("img",{key:0,class:"token",src:e(a),onError:n},null,40,le))}}),de=b(ue,[["__scopeId","data-v-485e9758"]]),_e=g({__name:"IconExpander",props:{expanded:{type:Boolean,default:!1}},setup(t){return(a,u)=>{const n=O;return l(),_(n,{class:q(["expander",{expanded:a.expanded}])},null,8,["class"])}}}),pe=b(_e,[["__scopeId","data-v-7caf48cb"]]),me={class:"tokens"},ve={class:"end",style:{display:"flex",gap:"1ch"}},he={class:"end"},fe={class:"end"},T=20,ge=g({__name:"TablePairs",props:{protocolName:{}},setup(t){const{isFetching:a,data:u}=H(J(()=>({chain:"ethereum",protocol_name:t.protocolName||""})),y(()=>!!t.protocolName)),n=["","",{id:"name",label:"Name",sort:!0},{id:"tvl",label:"TVL",sort:!0,align:"end"},{id:"rate",label:"Interest Rate",sort:!0,align:"end"},{id:"util",label:"Util",sort:!0,align:"end"}],{sorting:c,onSort:s}=se("tvl"),i=y(()=>(u.value??[]).orderBy(m=>{switch(c.value.column){case"name":return m.name;case"tvl":return m.totalCollateral;case"rate":return m.interestRate;case"util":return m.utilizationRate}},c.value.order)),{page:p,rowsPage:f,onPage:r}=te(i,T),k=M(),w=async m=>{var C;await k.push({name:"pair",params:{protocolName:(C=t.protocolName)==null?void 0:C.toLocaleLowerCase(),pairId:m.pairId.toString()}})};return(m,C)=>{const R=ne,V=pe,z=de,x=S,E=ae,A=X;return l(),_(A,{title:"Pairs",loading:e(a)},{actions:d(()=>[o(R,{"items-count":e(i).length,"items-per-page":T,page:e(p),onPage:e(r)},null,8,["items-count","page","onPage"])]),default:d(()=>[o(E,{class:"pairs-table",rows:e(f),columns:n,sorting:e(c),onSortColumn:e(s),onSelect:w},{row:d(({item:v})=>[o(V),h("div",me,[(l(),_(z,{key:v.tokenPairCollateral.symbol,chain:"ethereum",address:v.tokenPairCollateral.address},null,8,["address"]))]),h("div",null,$(e(K)(v.name)),1),h("div",ve,[o(x,{"show-zero":"",type:"dollar",value:v.totalCollateral/10**21,precision:2,"show-symbol":!1},null,8,["value"]),W(" "+$(v.tokenUnderlying.symbol),1)]),h("div",he,[o(x,{"show-zero":"",type:"percentage",value:v.interestRate/10**8,precision:2},null,8,["value"])]),h("div",fe,[o(x,{"show-zero":"",type:"percentage",value:v.utilizationRate,precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1},8,["loading"])}}}),be=b(ge,[["__scopeId","data-v-03033bca"]]),ye={class:"dashboard-grid"},Pe={class:"kpis"},ke=g({__name:"Protocol",props:{protocol:{}},setup(t){const{isFetching:a,data:u}=Q({chain:"ethereum"}),n=y(()=>{var c;return(((c=u.value)==null?void 0:c.protocols)??[]).find(s=>s.name.toLocaleLowerCase()===t.protocol)});return(c,s)=>{var f;const i=S,p=j;return l(),P("div",ye,[h("div",Pe,[o(p,{label:"Pairs","has-value":!e(a)},{default:d(()=>{var r;return[o(i,{value:(r=e(n))==null?void 0:r.pairsCount,precision:0},null,8,["value"])]}),_:1},8,["has-value"]),o(p,{label:"Total collateral","has-value":!e(a)},{default:d(()=>{var r;return[o(i,{value:(r=e(n))!=null&&r.totalCollateral?e(n).totalCollateral/10**18:void 0,precision:0},null,8,["value"])]}),_:1},8,["has-value"]),o(p,{label:"Total debt","has-value":!e(a)},{default:d(()=>{var r;return[o(i,{value:(r=e(n))==null?void 0:r.totalDebt,precision:0},null,8,["value"])]}),_:1},8,["has-value"])]),o(be,{"protocol-name":(f=e(n))==null?void 0:f.name},null,8,["protocol-name"])])}}}),L=b(ke,[["__scopeId","data-v-8294f885"]]),we={key:1,class:"dashboard"},Ce=g({__name:"Protocols.page",setup(t){const{tabActive:a,tabActiveIndex:u}=re(["curvelend","fraxlend"],"protocols",void 0,{tabParamName:"protocolName"}),{crumbs:n}=Y(Z()),c=ee();return B(()=>c.name,s=>{s!=="pair"&&(n.value=[{id:"protocols",label:"Protocols",pathName:"protocols"}])},{immediate:!0}),(s,i)=>{const p=oe("router-view"),f=U,r=D,k=F;return s.$route.name==="pair"?(l(),_(p,{key:0})):(l(),P("div",we,[o(f,{style:{"grid-area":"header"},title:"Protocols",description:"Lending markets metrics for Curve Lend and Frax Lend protocols"}),o(k,{active:e(u),onTab:i[0]||(i[0]=w=>u.value=w.index)},{default:d(()=>[o(r,{header:"Curve Lend"},{default:d(()=>[(l(),_(I,null,[e(a)==="curvelend"?(l(),_(L,{key:0,protocol:"curvelend"})):N("",!0)],1024))]),_:1}),o(r,{header:"Frax Lend"},{default:d(()=>[(l(),_(I,null,[e(a)==="fraxlend"?(l(),_(L,{key:0,protocol:"fraxlend"})):N("",!0)],1024))]),_:1})]),_:1},8,["active"])]))}}}),Fe=b(Ce,[["__scopeId","data-v-90d9b0e2"]]);export{Fe as default};
