import{_ as U,a as j}from"./TabItem.vue_vue_type_script_setup_true_lang-B1PPBc_Z.js";import{_ as H}from"./DashboardHeader-B9DjZVb_.js";import{_ as K}from"./KPI-DZVNiHl0.js";import{_ as R}from"./fetch-DRLrqTU_.js";import{u as G,a as O}from"./protocols-DHN5uLeK.js";import{d as y,ae as q,an as B,c as b,b as P,o as l,u as e,f as h,_ as k,j as m,aD as J,ak as M,t as Q,aE as W,w as _,e as o,g as $,i as X,h as Y,aF as Z,aG as ee,aw as oe,aH as ae,aC as I,ay as N}from"./index-Ci__0x6w.js";import{_ as te}from"./Table-DgB77jpL.js";import{u as ne,_ as se}from"./UsePagination-DPOOP3UB.js";import{p as T,a as re}from"./UseTabNavigation-DrQaFLN1.js";import{u as le}from"./UseSort-tD2evwKe.js";import"./Tooltip-CMs6kQZ9.js";import"./Number-BVeBD89l.js";import"./timestamp-D2Yelcgj.js";import"./Pagination-vgbH7lYO.js";const ce=["src"],ie=["href"],ue=["src"],de=y({__name:"TokenIcon",props:{chain:{default:"ethereum"},address:{},clickable:{type:Boolean,default:!1}},setup(n){const t=q("");function u(a){return`https://cdn.jsdelivr.net/gh/curvefi/curve-assets/images/assets${n.chain!=="ethereum"?`-${n.chain}`:""}/${a}.png`}const s=()=>{t.value="https://curve.fi/images/default-crypto.png"};B(()=>n.address,a=>{t.value=u(a.toLowerCase())},{immediate:!0});const d=b(()=>{switch(n.chain){case"arbitrum":return`https://arbiscan.io/address/${n.address}`;case"ethereum":default:return`https://etherscan.io/address/${n.address}`}});return(a,c)=>a.clickable?(l(),P("a",{key:1,target:"_blank",href:e(d)},[h("img",{class:"token",src:e(t),onError:s},null,40,ue)],8,ie)):(l(),P("img",{key:0,class:"token",src:e(t),onError:s},null,40,ce))}}),_e=k(de,[["__scopeId","data-v-485e9758"]]),pe=y({__name:"IconExpander",props:{expanded:{type:Boolean,default:!1}},setup(n){return(t,u)=>{const s=J;return l(),m(s,{class:M(["expander",{expanded:t.expanded}])},null,8,["class"])}}}),me=k(pe,[["__scopeId","data-v-7caf48cb"]]),ve={class:"tokens"},he={class:"end",style:{display:"flex",gap:"1ch"}},fe={class:"end"},ge={class:"end"},L=20,be=y({__name:"TablePairs",props:{protocolName:{}},setup(n){const{isFetching:t,data:u}=G(Q(()=>({chain:"ethereum",protocol_name:n.protocolName||""})),b(()=>!!n.protocolName)),s=b(()=>{var i;return(i=u.value)==null?void 0:i.filter(g=>g.borrowLimit>0)}),d=["","",{id:"name",label:"Name",sort:!0},{id:"tvl",label:"TVL",sort:!0,align:"end"},{id:"rate",label:"Interest Rate",sort:!0,align:"end"},{id:"util",label:"Util",sort:!0,align:"end"}],{sorting:a,onSort:c}=le("tvl"),p=b(()=>(s.value??[]).orderBy(i=>{switch(a.value.column){case"name":return T(i.name);case"tvl":return i.totalCollateral;case"rate":return i.interestRate;case"util":return i.utilizationRate}},a.value.order)),{page:f,rowsPage:r,onPage:w}=ne(p,L),C=W(),V=async i=>{var g;await C.push({name:"pair",params:{protocolName:(g=n.protocolName)==null?void 0:g.toLocaleLowerCase(),pairId:i.pairId.toString()}})};return(i,g)=>{const E=se,z=me,A=_e,x=R,D=te,F=Y;return l(),m(F,{title:"Pairs",loading:e(t)},{actions:_(()=>[o(E,{"items-count":e(p).length,"items-per-page":L,page:e(f),onPage:e(w)},null,8,["items-count","page","onPage"])]),default:_(()=>[o(D,{class:"pairs-table",rows:e(r),columns:d,sorting:e(a),onSortColumn:e(c),onSelect:V},{row:_(({item:v})=>[o(z),h("div",ve,[(l(),m(A,{key:v.tokenPairCollateral.symbol,chain:"ethereum",address:v.tokenPairCollateral.address},null,8,["address"]))]),h("div",null,$(e(T)(v.name)),1),h("div",he,[o(x,{"show-zero":"",type:"dollar",value:v.totalCollateral/10**21,precision:2,"show-symbol":!1},null,8,["value"]),X(" "+$(v.tokenUnderlying.symbol),1)]),h("div",fe,[o(x,{"show-zero":"",type:"percentage",value:v.interestRate/10**8,precision:2},null,8,["value"])]),h("div",ge,[o(x,{"show-zero":"",type:"percentage",value:v.utilizationRate,precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1},8,["loading"])}}}),ye=k(be,[["__scopeId","data-v-c88f1591"]]),ke={class:"dashboard-grid"},Pe={class:"kpis"},we=y({__name:"Protocol",props:{protocol:{}},setup(n){const{isFetching:t,data:u}=O({chain:"ethereum"}),s=b(()=>{var d;return(((d=u.value)==null?void 0:d.protocols)??[]).find(a=>a.name.toLocaleLowerCase()===n.protocol)});return(d,a)=>{var f;const c=R,p=K;return l(),P("div",ke,[h("div",Pe,[o(p,{label:"Pairs","has-value":!e(t)},{default:_(()=>{var r;return[o(c,{value:(r=e(s))==null?void 0:r.pairsCount,precision:0},null,8,["value"])]}),_:1},8,["has-value"]),o(p,{label:"Total collateral","has-value":!e(t)},{default:_(()=>{var r;return[o(c,{value:(r=e(s))!=null&&r.totalCollateral?e(s).totalCollateral/10**18:void 0,precision:0},null,8,["value"])]}),_:1},8,["has-value"]),o(p,{label:"Total debt","has-value":!e(t)},{default:_(()=>{var r;return[o(c,{value:(r=e(s))==null?void 0:r.totalDebt,precision:0},null,8,["value"])]}),_:1},8,["has-value"])]),o(ye,{"protocol-name":(f=e(s))==null?void 0:f.name},null,8,["protocol-name"])])}}}),S=k(we,[["__scopeId","data-v-c5f2c31f"]]),Ce={key:1,class:"dashboard"},xe=y({__name:"Protocols.page",setup(n){const{tabActive:t,tabActiveIndex:u}=re(["curvelend","fraxlend"],"protocols",void 0,{tabParamName:"protocolName"}),{crumbs:s}=Z(ee()),d=oe();return B(()=>d.name,a=>{a!=="pair"&&(s.value=[{id:"protocols",label:"Protocols",pathName:"protocols"}])},{immediate:!0}),(a,c)=>{const p=ae("router-view"),f=H,r=U,w=j;return a.$route.name==="pair"?(l(),m(p,{key:0})):(l(),P("div",Ce,[o(f,{style:{"grid-area":"header"},title:"Protocols",description:"Lending markets metrics for Curve Lend and Frax Lend protocols"}),o(w,{active:e(u),onTab:c[0]||(c[0]=C=>u.value=C.index)},{default:_(()=>[o(r,{header:"Curve Lend"},{default:_(()=>[(l(),m(I,null,[e(t)==="curvelend"?(l(),m(S,{key:0,protocol:"curvelend"})):N("",!0)],1024))]),_:1}),o(r,{header:"Frax Lend"},{default:_(()=>[(l(),m(I,null,[e(t)==="fraxlend"?(l(),m(S,{key:0,protocol:"fraxlend"})):N("",!0)],1024))]),_:1})]),_:1},8,["active"])]))}}}),Ue=k(xe,[["__scopeId","data-v-90d9b0e2"]]);export{Ue as default};
