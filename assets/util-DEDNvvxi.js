import{f as m,a as v}from"./fetch-S3nWqVm-.js";import{o as s,s as o,n as r,a as p,t as _,h as u,p as d,g as b}from"./timestamp-Ki00Lgd1.js";import{u as g}from"./Number-BwCHtbMI.js";import{p as F}from"./Pagination-vgbH7lYO.js";import{at as k}from"./index-DAmMJpTU.js";const w=s({name:o(),protocol_id:r(),pairs_count:r(),active_positions_count:r(),total_collateral:o(),total_debt:o()}).transform(e=>({name:e.name,protocolId:e.protocol_id,pairsCount:e.pairs_count,activePositionsCount:e.active_positions_count,totalCollateral:parseFloat(e.total_collateral),totalDebt:parseFloat(e.total_debt)})),h=s({protocols:p(w),count:r()}).transform(e=>({protocols:e.protocols,count:e.count})),i=s({symbol:o(),name:o(),address:o(),precision:r()}).transform(e=>({symbol:e.symbol,name:e.name,address:e.address,precision:e.precision})),P=s({token_address:o(),token_symbol:o(),apr:o()}).transform(e=>({tokenAddress:e.token_address,tokenSymbol:e.token_symbol,apr:parseFloat(e.apr)})),C=s({pair_id:r(),name:o(),address:o(),total_collateral:o(),total_underlying:o(),exchange_rate:o(),total_debt:o(),active_positions_count:r(),borrow_limit:o(),utilization_rate:o(),interest_rate:o(),claimable_fees:o(),claimable_other_fees:o(),block_timestamp:r(),last_redemption:r().nullable(),redemption_fee_10k:o(),borrow_cost_apr:o(),base_apr:o(),rewards:p(P),collateral_token:i,debt_token:i,underlying_token:i,pair_collateral_token:i,pair_underlying_token:i}).transform(e=>({pairId:e.pair_id,name:e.name,address:e.address,totalCollateral:parseFloat(e.total_collateral),totalUnderlying:parseFloat(e.total_underlying),exchangeRate:parseFloat(e.exchange_rate),totalDebt:parseFloat(e.total_debt),activePositionsCount:e.active_positions_count,borrowLimit:parseFloat(e.borrow_limit),utilizationRate:parseFloat(e.utilization_rate),interestRate:parseFloat(e.interest_rate),claimableFees:parseFloat(e.claimable_fees),claimableOtherFees:parseFloat(e.claimable_other_fees),blockTime:_(e.block_timestamp),lastRedemption:e.last_redemption?_(e.last_redemption):null,redemptionFee10k:parseFloat(e.redemption_fee_10k),aprBorrowCost:parseFloat(e.borrow_cost_apr),aprBase:parseFloat(e.base_apr),rewards:e.rewards,tokenCollateral:e.collateral_token,tokenDebt:e.debt_token,tokenUnderlying:e.underlying_token,tokenPairCollateral:e.pair_collateral_token,tokenPairUnderyling:e.pair_underlying_token})),D=s({pairs:p(C),count:r(),page:r(),total_pages:r()}).transform(e=>({pairs:e.pairs,count:e.count,page:e.page,totalPages:e.total_pages})),$=s(u);async function R(e,t){const n=b(),{chain:a}=$.parse(e),l=await m(`${n}/v1/protocols/overview/${a}`,void 0,t==null?void 0:t.signal);return h.parse(l)}const q=s({...u,...d,protocol_name:o()});async function x(e,t){const n=b(),{chain:a,protocol_name:l,...c}=q.parse(e),f=v(c),y=await m(`${n}/v1/protocols/${a}/${l}/pairs${f}`,void 0,t==null?void 0:t.signal);return D.parse(y)}function U(e){return g({queryKey:["protocols-overview",e],queryFn:()=>R(k(e))})}function B(e,t){return g({queryKey:["protocols-pairs",e],queryFn:()=>F((a,l)=>x({...k(e),page:a,per_page:l}).then(c=>c.pairs),1,100),enabled:t})}function K(e){const t=e.match(/\((CurveLend|Fraxlend): ([^)]+)\) - (\d+)/);if(!t)return e;const n=t[2],a=parseInt(t[3],10);return a>1?`${n} (#${a})`:n}export{U as a,K as p,B as u};
