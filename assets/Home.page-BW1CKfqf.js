var H=Object.defineProperty;var D=(t,e,s)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var v=(t,e,s)=>D(t,typeof e!="symbol"?e+"":e,s);import{u as I}from"./protocols-Dq__jjai.js";import{u as k}from"./stablecoin-Dm7G7S6K.js";import{d as f,u as B,a as U,c as P,w as A,b as R,o as y,e as h,f as u,g as c,h as o,_ as q,E as K,t as g,R as T,i as E,j as w,k as F,l as $}from"./index-C4bxLmri.js";import{u as L,c as V,a as N,_ as O}from"./UseLightweightChart-C12vCX9v.js";import{_ as Q}from"./BtnChartLWExport.vue_vue_type_script_setup_true_lang-CH9iGe7u.js";import{r as W,u as j,f as S,a as C}from"./Number-D-_ywgC3.js";import{_ as z}from"./KPI-BvSL3471.js";import{g as J,_ as M}from"./AsyncValue-Brd_Goit.js";import"./Pagination-vgbH7lYO.js";import"./Tooltip-DPMfqQ_8.js";const G="/assets/hippo-ghibli-DCzfPtIQ.png",X={style:{display:"flex"}},Y={ref:"chartRef",class:"chart"},Z=f({__name:"ChartPrice",props:{price:{}},setup(t){const e=B(),s=U("card"),{chart:a,series:i}=L({createChartOptions:N(),series:V({name:"price",color:P(()=>e.value.colors.blue),formatter:l=>`$${W(l,4,"dollar")}${j(l)}`,minMove:.001})});A(_);function _(){if(!a.value||!i.price)return;const l=t.price.map(n=>({time:n.timestamp.getUTCTimestamp(),value:n.price})).uniqWith((n,p)=>n.time===p.time).orderBy(n=>n.time,"asc");l.length>0&&i.price.setData(l),a.value.timeScale().fitContent()}return(l,n)=>{const p=Q,d=O,r=q;return y(),R(r,{ref_key:"card",ref:s,title:"Stablecoin Price (reUSD)"},{actions:h(()=>[u("div",X,[c(p,{filename:"tvl",series:o(i)},null,8,["series"]),c(d,{chart:o(a),target:o(s)},null,8,["chart","target"])])]),default:h(()=>[u("div",Y,null,512)]),_:1},512)}}});class ee{async fetch(e,s,a){return S(e,s,a)}}class te extends ee{constructor(s){super();v(this,"host");this.host=s}async getHost(){return await this.host}}class se extends te{async getPrice(e){const s=await this.getHost(),a=`ethereum:${e}`;return this.fetch(`${s}/price/${e}`).then(i=>i[a])}async getPrices(e){const s=await this.getHost(),a=e.join(",");return this.fetch(`${s}/price/${a}`)}}const ae={laf:"https://api.llama.airforce",ha:"https://api2.hippo.army",cb:void 0,cm:"https://api2.curvemonitor.com"},re=["cb","laf","ha","cm"];function oe(){const t="ha";if(!re.includes(t)){const e=`Unknown app for useApp(): ${t}`;throw K({text:e,type:"error"}),new Error(e)}return t}const m={};function ne(t){return ae[t]}async function x(t){const e=oe(),s=e;if(m[s])return Promise.resolve(m[s]);const a=ne(e);return m[s]=a,m[s]}const ce=new se(x());function b(t){return C({queryKey:["token-price",t],queryFn:async({queryKey:[,e]})=>ce.getPrice(e),enabled:P(()=>!!t.value),initialDataUpdatedAt:0})}async function ie(t){const e=J(t);return await S(`${e}/stats`,void 0,t==null?void 0:t.signal)}function le(){return C({queryKey:["stats"],queryFn:async()=>{const t=await x();return ie({host:t})}})}const ue={class:"kpis"},pe=f({__name:"KPIs",setup(t){const{data:e}=b(g(()=>T)),{data:s}=b(g(()=>E)),{data:a}=le();return(i,_)=>{var p,d;const l=M,n=z;return y(),w("div",ue,[c(n,{class:"border-special",label:"RSUP Price","has-value":!!o(e)},{default:h(()=>{var r;return[c(l,{type:"dollar",value:((r=o(e))==null?void 0:r.price)??1/0,precision:3},null,8,["value"])]}),_:1},8,["has-value"]),c(n,{class:"border-special",label:"reUSD Price","has-value":!!o(s)},{default:h(()=>{var r;return[c(l,{type:"dollar",value:((r=o(s))==null?void 0:r.price)??1/0,precision:3},null,8,["value"])]}),_:1},8,["has-value"]),c(n,{class:"border-special",label:"Total reUSD borrowed","has-value":!!((p=o(a))!=null&&p.borrowed)},{default:h(()=>{var r;return[c(l,{type:"dollar",value:((r=o(a))==null?void 0:r.borrowed)??1/0,precision:0,"show-symbol":!1},null,8,["value"]),_[0]||(_[0]=F(" reUSD "))]}),_:1},8,["has-value"]),c(n,{class:"border-special",label:"Total collateral","has-value":!!((d=o(a))!=null&&d.collateral)},{default:h(()=>{var r;return[c(l,{type:"dollar",value:((r=o(a))==null?void 0:r.collateral)??1/0,precision:0},null,8,["value"])]}),_:1},8,["has-value"])])}}}),he=$(pe,[["__scopeId","data-v-a8311ac2"]]),_e={class:"dashboard"},de={class:"highlights"},me=f({__name:"Home.page",setup(t){const{isFetching:e,data:s}=k();return I(),(a,i)=>(y(),w("div",_e,[i[0]||(i[0]=u("div",{class:"description"},[u("span",{class:"title"},"Hippo Army"),u("span",{class:"tag"},"Resupplying your portobello with hippo insights.")],-1)),i[1]||(i[1]=u("img",{class:"hippo",src:G},null,-1)),u("div",de,[c(he)]),c(Z,{style:{"grid-area":"price"},price:o(s),loading:o(e)},null,8,["price","loading"])]))}}),He=$(me,[["__scopeId","data-v-3f70b5b5"]]);export{He as default};
