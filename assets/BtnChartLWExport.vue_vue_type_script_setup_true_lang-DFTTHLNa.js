import{m as f,d as h,j as v,o as _,as as w,w as b,e as k}from"./index-DAmMJpTU.js";/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=f("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),j=h({__name:"BtnChartLWExport",props:{filename:{},series:{}},setup(i){function m(e){if(typeof e=="number")return e;if(typeof e=="string")return Math.floor(new Date(e).getTime()/1e3);if(typeof e=="object"&&"year"in e){const{year:a,month:o,day:n}=e;return Math.floor(new Date(a,o-1,n).getTime()/1e3)}throw new Error("Invalid time format")}function u(e){return Object.entries(e).map(([a,o])=>({column:a,data:((o==null?void 0:o.data())??[]).map(n=>({time:m(n.time),value:"value"in n?n.value:0}))}))}function d(){const e=u(i.series),a=e.flatMap(t=>t.data.map(c=>({column:t.column,data:c}))).groupBy(t=>t.data.time).entries().orderBy(([t])=>Number(t)).map(([t,c])=>{const y=c.orderBy(s=>s.column).map(s=>s.data.value).join(";");return`${t};${y}`}),n=["time;"+e.map(t=>t.column).orderBy(t=>t).join(";"),...a].join(`
`),p=new Blob([n],{type:"text/csv;charset=utf-8"}),l=URL.createObjectURL(p),r=document.createElement("a");r.href=l,r.download=`${i.filename}.csv`,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(l)}return(e,a)=>{const o=x,n=w;return _(),v(n,{onClick:d},{default:b(()=>[k(o)]),_:1})}}});export{j as _};
