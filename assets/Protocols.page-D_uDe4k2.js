import{_ as F,a as U}from"./TabItem.vue_vue_type_script_setup_true_lang-D6W5WPtw.js";import{_ as j}from"./DashboardHeader-jjU4oyqz.js";import{_ as H}from"./KPI-DWk_VgbO.js";import{_ as S}from"./fetch-S3nWqVm-.js";import{u as K,p as G,a as O}from"./util-DEDNvvxi.js";import{d as k,ae as q,an as B,c as b,b as P,o as l,u as e,f as h,_ as y,j as m,aD as J,ak as M,t as Q,aB as W,w as _,e as o,g as $,i as X,h as Y,aE as Z,aF as ee,aG as oe,aH as ae,aC as I,ax as N}from"./index-DAmMJpTU.js";import{_ as te}from"./Table-DQn4OZ6C.js";import{u as ne,_ as se}from"./UsePagination-rqSrHaF6.js";import{u as re}from"./UseSort-hKf6Gr7M.js";import{a as le}from"./UseTabNavigation-BMoLa5Lo.js";import"./Tooltip-Yo6BbvH-.js";import"./Number-BwCHtbMI.js";import"./timestamp-Ki00Lgd1.js";import"./Pagination-vgbH7lYO.js";const ce=["src"],ie=["href"],ue=["src"],de=k({__name:"TokenIcon",props:{chain:{default:"ethereum"},address:{},clickable:{type:Boolean,default:!1}},setup(n){const t=q("");function u(a){return`https://cdn.jsdelivr.net/gh/curvefi/curve-assets/images/assets${n.chain!=="ethereum"?`-${n.chain}`:""}/${a}.png`}const s=()=>{t.value="https://curve.fi/images/default-crypto.png"};B(()=>n.address,a=>{t.value=u(a.toLowerCase())},{immediate:!0});const d=b(()=>{switch(n.chain){case"arbitrum":return`https://arbiscan.io/address/${n.address}`;case"ethereum":default:return`https://etherscan.io/address/${n.address}`}});return(a,c)=>a.clickable?(l(),P("a",{key:1,target:"_blank",href:e(d)},[h("img",{class:"token",src:e(t),onError:s},null,40,ue)],8,ie)):(l(),P("img",{key:0,class:"token",src:e(t),onError:s},null,40,ce))}}),_e=y(de,[["__scopeId","data-v-485e9758"]]),pe=k({__name:"IconExpander",props:{expanded:{type:Boolean,default:!1}},setup(n){return(t,u)=>{const s=J;return l(),m(s,{class:M(["expander",{expanded:t.expanded}])},null,8,["class"])}}}),me=y(pe,[["__scopeId","data-v-7caf48cb"]]),ve={class:"tokens"},he={class:"end",style:{display:"flex",gap:"1ch"}},fe={class:"end"},ge={class:"end"},T=20,be=k({__name:"TablePairs",props:{protocolName:{}},setup(n){const{isFetching:t,data:u}=K(Q(()=>({chain:"ethereum",protocol_name:n.protocolName||""})),b(()=>!!n.protocolName)),s=b(()=>{var i;return(i=u.value)==null?void 0:i.filter(g=>g.borrowLimit>0)}),d=["","",{id:"name",label:"Name",sort:!0},{id:"tvl",label:"TVL",sort:!0,align:"end"},{id:"rate",label:"Interest Rate",sort:!0,align:"end"},{id:"util",label:"Util",sort:!0,align:"end"}],{sorting:a,onSort:c}=re("tvl"),p=b(()=>(s.value??[]).orderBy(i=>{switch(a.value.column){case"name":return i.name;case"tvl":return i.totalCollateral;case"rate":return i.interestRate;case"util":return i.utilizationRate}},a.value.order)),{page:f,rowsPage:r,onPage:w}=ne(p,T),x=W(),R=async i=>{var g;await x.push({name:"pair",params:{protocolName:(g=n.protocolName)==null?void 0:g.toLocaleLowerCase(),pairId:i.pairId.toString()}})};return(i,g)=>{const V=se,E=me,z=_e,C=S,A=te,D=Y;return l(),m(D,{title:"Pairs",loading:e(t)},{actions:_(()=>[o(V,{"items-count":e(p).length,"items-per-page":T,page:e(f),onPage:e(w)},null,8,["items-count","page","onPage"])]),default:_(()=>[o(A,{class:"pairs-table",rows:e(r),columns:d,sorting:e(a),onSortColumn:e(c),onSelect:R},{row:_(({item:v})=>[o(E),h("div",ve,[(l(),m(z,{key:v.tokenPairCollateral.symbol,chain:"ethereum",address:v.tokenPairCollateral.address},null,8,["address"]))]),h("div",null,$(e(G)(v.name)),1),h("div",he,[o(C,{"show-zero":"",type:"dollar",value:v.totalCollateral/10**21,precision:2,"show-symbol":!1},null,8,["value"]),X(" "+$(v.tokenUnderlying.symbol),1)]),h("div",fe,[o(C,{"show-zero":"",type:"percentage",value:v.interestRate/10**8,precision:2},null,8,["value"])]),h("div",ge,[o(C,{"show-zero":"",type:"percentage",value:v.utilizationRate,precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1},8,["loading"])}}}),ke=y(be,[["__scopeId","data-v-e80c9a7f"]]),ye={class:"dashboard-grid"},Pe={class:"kpis"},we=k({__name:"Protocol",props:{protocol:{}},setup(n){const{isFetching:t,data:u}=O({chain:"ethereum"}),s=b(()=>{var d;return(((d=u.value)==null?void 0:d.protocols)??[]).find(a=>a.name.toLocaleLowerCase()===n.protocol)});return(d,a)=>{var f;const c=S,p=H;return l(),P("div",ye,[h("div",Pe,[o(p,{label:"Pairs","has-value":!e(t)},{default:_(()=>{var r;return[o(c,{value:(r=e(s))==null?void 0:r.pairsCount,precision:0},null,8,["value"])]}),_:1},8,["has-value"]),o(p,{label:"Total collateral","has-value":!e(t)},{default:_(()=>{var r;return[o(c,{value:(r=e(s))!=null&&r.totalCollateral?e(s).totalCollateral/10**18:void 0,precision:0},null,8,["value"])]}),_:1},8,["has-value"]),o(p,{label:"Total debt","has-value":!e(t)},{default:_(()=>{var r;return[o(c,{value:(r=e(s))==null?void 0:r.totalDebt,precision:0},null,8,["value"])]}),_:1},8,["has-value"])]),o(ke,{"protocol-name":(f=e(s))==null?void 0:f.name},null,8,["protocol-name"])])}}}),L=y(we,[["__scopeId","data-v-c5f2c31f"]]),xe={key:1,class:"dashboard"},Ce=k({__name:"Protocols.page",setup(n){const{tabActive:t,tabActiveIndex:u}=le(["curvelend","fraxlend"],"protocols",void 0,{tabParamName:"protocolName"}),{crumbs:s}=Z(ee()),d=oe();return B(()=>d.name,a=>{a!=="pair"&&(s.value=[{id:"protocols",label:"Protocols",pathName:"protocols"}])},{immediate:!0}),(a,c)=>{const p=ae("router-view"),f=j,r=F,w=U;return a.$route.name==="pair"?(l(),m(p,{key:0})):(l(),P("div",xe,[o(f,{style:{"grid-area":"header"},title:"Protocols",description:"Lending markets metrics for Curve Lend and Frax Lend protocols"}),o(w,{active:e(u),onTab:c[0]||(c[0]=x=>u.value=x.index)},{default:_(()=>[o(r,{header:"Curve Lend"},{default:_(()=>[(l(),m(I,null,[e(t)==="curvelend"?(l(),m(L,{key:0,protocol:"curvelend"})):N("",!0)],1024))]),_:1}),o(r,{header:"Frax Lend"},{default:_(()=>[(l(),m(I,null,[e(t)==="fraxlend"?(l(),m(L,{key:0,protocol:"fraxlend"})):N("",!0)],1024))]),_:1})]),_:1},8,["active"])]))}}}),Ue=y(Ce,[["__scopeId","data-v-90d9b0e2"]]);export{Ue as default};
