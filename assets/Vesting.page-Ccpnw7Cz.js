import{_ as ge}from"./DashboardHeader-CBTrQLFq.js";import{ar as B,d as Q,at as oe,c as A,au as _e,av as ve,j as T,o as y,w as m,f as V,e as l,u as a,h as ee,_ as E,b as re,i as M,ae as ye,aw as K,g as X}from"./index--6aQy66t.js";import{u as fe,_ as he}from"./UseLegend-BqSHP-IN.js";import{u as be,c as Ae,_ as Pe}from"./UseLightweightChart-CBj2c-74.js";import{z as r,t as se,e as I,g as k}from"./timestamp-D1DOFXxn.js";import{f as F,_ as ne}from"./fetch-CzIKldv6.js";import{u as R,r as Te,a as Ve}from"./Number-JCDnKITR.js";import{_ as je}from"./ChartApex-CN81F-ET.js";import{_ as Se}from"./KPI-Do90NnUD.js";import{_ as we}from"./Table-B1fGGnP3.js";import{u as Y,_ as Ce}from"./UsePagination-BUVeOBbV.js";import{a as $e,_ as ke}from"./TabItem.vue_vue_type_script_setup_true_lang-By3qrmS3.js";import{u as Z}from"./UseSort-CbcbNk78.js";import"./Tooltip-ZsHLl0Z0.js";const te=r.object({value:r.string(),timestamp:r.number()}).transform(e=>({value:parseFloat(e.value),timestamp:se(e.timestamp)})),Fe=r.object({total_allocation:r.string(),claim_count:r.number(),total_claimed:r.string(),history:r.array(te),total_redeemed:r.string()}).transform(e=>({totalAllocation:parseFloat(e.total_allocation),claimCount:e.claim_count,totalClaimed:parseFloat(e.total_claimed),history:e.history,totalRedeemed:parseFloat(e.total_redeemed)})),ae=r.object({projection:r.array(te),total_vested:r.string(),current_unlocked:r.string(),current_timestamp:r.number()}).transform(e=>({projection:e.projection,totalVested:parseFloat(e.total_vested),unlocked:parseFloat(e.current_unlocked),time:se(e.current_timestamp)})),ie=r.object({total_allocation:r.string(),claim_count:r.number(),total_claimed:r.string(),history:r.array(te)}).transform(e=>({totalAllocation:parseFloat(e.total_allocation),claimCount:e.claim_count,totalClaimed:parseFloat(e.total_claimed),history:e.history})),Re=r.object({total_supply:r.string(),perma_staked:r.string(),airdrop_vesting:r.string(),redemption_vesting:r.string(),treasury_vesting:r.string(),licensing_vesting:r.string(),circulating_supply:r.string()}).transform(e=>({totalSupply:parseFloat(e.total_supply),permaStaked:parseFloat(e.perma_staked),airdropVesting:parseFloat(e.airdrop_vesting),redemptionVesting:parseFloat(e.redemption_vesting),treasuryVesting:parseFloat(e.treasury_vesting),licensingVesting:parseFloat(e.licensing_vesting),circulatingSupply:parseFloat(e.circulating_supply)})),De=r.object({...I});async function qe(e,t){const o=k(),{chain:s}=De.parse(e),n=await F(`${o}/v1/vesting/${s}/redemptions`,void 0,t==null?void 0:t.signal);return Fe.parse(n)}const xe=r.object({...I});async function Ke(e,t){const o=k(),{chain:s}=xe.parse(e),n=await F(`${o}/v1/vesting/${s}/redemptions/projection`,void 0,t==null?void 0:t.signal);return ae.parse(n)}const Le=r.object({...I});async function Be(e,t){const o=k(),{chain:s}=Le.parse(e),n=await F(`${o}/v1/vesting/${s}/airdrops/team`,void 0,t==null?void 0:t.signal);return ie.parse(n)}const Ie=r.object({...I});async function Qe(e,t){const o=k(),{chain:s}=Ie.parse(e),n=await F(`${o}/v1/vesting/${s}/airdrops/team/projection`,void 0,t==null?void 0:t.signal);return ae.parse(n)}const Ue=r.object({...I});async function Ne(e,t){const o=k(),{chain:s}=Ue.parse(e),n=await F(`${o}/v1/vesting/${s}/airdrops/victims`,void 0,t==null?void 0:t.signal);return ie.parse(n)}const Oe=r.object({...I});async function Ee(e,t){const o=k(),{chain:s}=Oe.parse(e),n=await F(`${o}/v1/vesting/${s}/airdrops/victims/projection`,void 0,t==null?void 0:t.signal);return ae.parse(n)}async function He(e){const t=k(),o=await F(`${t}/v1/vesting/circulating_supply`,void 0,e==null?void 0:e.signal);return Re.parse(o)}function le(e){return R({queryKey:["vesting-redemptions",e],queryFn:()=>qe(B(e))})}function We(e){return R({queryKey:["vesting-redemptions-projection",e],queryFn:()=>Ke(B(e))})}function ce(e){return R({queryKey:["vesting-airdrops-team",e],queryFn:()=>Be(B(e))})}function ze(e){return R({queryKey:["vesting-airdrops-team-projection",e],queryFn:()=>Qe(B(e))})}function ue(e){return R({queryKey:["vesting-airdrops-victims",e],queryFn:()=>Ne(B(e))})}function Je(e){return R({queryKey:["vesting-airdrops-victims-projection",e],queryFn:()=>Ee(B(e))})}function pe(){return R({queryKey:["vesting-circulating-supply"],queryFn:()=>He()})}const Ge={style:{display:"flex"}},Me={class:"actions-secondary"},Xe={ref:"chartRef",class:"chart"},Ye=Q({__name:"ChartProjections",setup(e){const t={chain:"ethereum"},{data:o}=We(t),{data:s}=ze(t),{data:n}=Je(t),i=oe(),{items:P,toggles:d,disabled:f}=fe(()=>[{id:"victimsAirdrops",label:"Victims Airdrops",color:i.value.colorsArray[2],togglable:!0},{id:"teamAirdrops",label:"Team Airdrops",color:i.value.colorsArray[1],togglable:!0},{id:"redemptions",label:"Redemptions",color:i.value.colorsArray[0],togglable:!0}]),D=A(()=>{if(!o.value||!s.value||!n.value)return[];const u=new Set;for(const c of o.value.projection)u.add(c.timestamp.getTime());for(const c of s.value.projection)u.add(c.timestamp.getTime());for(const c of n.value.projection)u.add(c.timestamp.getTime());const S=Array.from(u).sort(),j=n.value.projection.map(c=>({time:c.timestamp.getTime(),value:c.value})).sort((c,$)=>c.time-$.time),w=s.value.projection.map(c=>({time:c.timestamp.getTime(),value:c.value})).sort((c,$)=>c.time-$.time);let x=j.length>0?j[j.length-1].value:0,C=w.length>0?w[w.length-1].value:0;return S.map(c=>{var O;const $=new Date(c),H=((O=o.value.projection.find(p=>p.timestamp.getTime()===c))==null?void 0:O.value)||0,U=s.value.projection.find(p=>p.timestamp.getTime()===c);U&&(C=U.value);const N=n.value.projection.find(p=>p.timestamp.getTime()===c);return N&&(x=N.value),{time:$.getUTCTimestamp(),values:[d.victimsAirdrops.value?x:0,d.teamAirdrops.value?C:0,d.redemptions.value?H:0]}})}),g=_e("card"),{chart:h,series:_}=be({createChartOptions:Ae(),series:{type:"StackedArea",name:"stacked",options:A(()=>({priceFormat:{type:"custom",formatter:u=>`${Te(u,0,"dollar")}${Ve(u)}`},colors:[{line:i.value.colorsArray[2],area:`${i.value.colorsArray[2]}33`},{line:i.value.colorsArray[1],area:`${i.value.colorsArray[1]}33`},{line:i.value.colorsArray[0],area:`${i.value.colorsArray[0]}33`}],lineWidth:2,lastValueVisible:!1,priceLineVisible:!1}))}});ve(q);function q(){if(!h.value||!_.stacked)return;const u=D.value;u.length>0&&_.stacked.setData(u),h.value.timeScale().fitContent()}return(u,S)=>{const j=Pe,w=he,x=ee;return y(),T(x,{ref_key:"card",ref:g,title:"Vesting Projections",class:"stack-actions"},{actions:m(()=>[V("div",Ge,[l(j,{chart:a(h),target:a(g)},null,8,["chart","target"])])]),"actions-secondary":m(()=>[V("div",Me,[l(w,{items:a(P),disabled:a(f),onToggle:S[0]||(S[0]=C=>a(d)[C].value=!a(d)[C].value)},null,8,["items","disabled"])])]),default:m(()=>[V("div",Xe,null,512)]),_:1},512)}}}),Ze=E(Ye,[["__scopeId","data-v-fd0ab166"]]),et=Q({__name:"ChartSupplyDistribution",setup(e){const{data:t}=pe(),o=oe(),s=A(()=>t.value?[t.value.circulatingSupply,t.value.permaStaked,t.value.redemptionVesting,t.value.airdropVesting,t.value.treasuryVesting,t.value.licensingVesting]:[]),n=["Circulating Supply","Perma Staked","Redemption Vesting","Airdrop Vesting","Treasury Vesting","Licensing Vesting"],i=A(()=>({chart:{type:"pie",height:350},colors:[`${o.value.colorsArray[0]}88`,`${o.value.colorsArray[2]}88`,`${o.value.colorsArray[1]}88`,`${o.value.colorsArray[3]}88`,`${o.value.colorsArray[4]}88`,`${o.value.colorsArray[0]}aa`],labels:n,legend:{labels:{colors:o.value.colors.text}}}));return(P,d)=>{const f=je,D=ee;return y(),T(D,{ref:"supplyCard",title:"Token Supply Distribution"},{default:m(()=>[l(f,{options:i.value,series:s.value},null,8,["options","series"])]),_:1},512)}}}),tt={class:"kpis"},at=Q({__name:"KPIs",setup(e){const t={chain:"ethereum"},{data:o}=le(t),{data:s}=ce(t),{data:n}=ue(t),{data:i}=pe(),P=A(()=>!o.value||!s.value||!n.value?null:o.value.totalAllocation+s.value.totalAllocation+n.value.totalAllocation),d=A(()=>!o.value||!s.value||!n.value?null:o.value.totalClaimed+s.value.totalClaimed+n.value.totalClaimed),f=A(()=>!P.value||!d.value?null:d.value/P.value*100);return(D,g)=>{var q;const h=ne,_=Se;return y(),re("div",tt,[l(_,{label:"Total Allocated","has-value":!!a(P)},{default:m(()=>[l(h,{type:"dollar",value:a(P),precision:2,"show-symbol":!1},null,8,["value"]),g[0]||(g[0]=M(" reUSD "))]),_:1},8,["has-value"]),l(_,{label:"Total Claimed","has-value":!!a(d)},{default:m(()=>[l(h,{type:"dollar",value:a(d),precision:2,"show-symbol":!1},null,8,["value"]),g[1]||(g[1]=M(" reUSD "))]),_:1},8,["has-value"]),l(_,{label:"Claim Percentage","has-value":!!a(f)},{default:m(()=>[l(h,{type:"percentage",value:a(f),precision:2},null,8,["value"])]),_:1},8,["has-value"]),l(_,{label:"Circulating Supply","has-value":!!((q=a(i))!=null&&q.circulatingSupply)},{default:m(()=>{var u;return[l(h,{type:"dollar",value:(u=a(i))==null?void 0:u.circulatingSupply,precision:2,"show-symbol":!1},null,8,["value"]),g[2]||(g[2]=M(" reUSD "))]}),_:1},8,["has-value"])])}}}),ot=E(at,[["__scopeId","data-v-fc027f31"]]),rt={class:"end"},st={class:"end"},nt={class:"end"},L=10,it=Q({__name:"TableVesting",setup(e){const t={chain:"ethereum"},{data:o}=le(t),{data:s}=ce(t),{data:n}=ue(t),i=ye(0),P=[{id:"date",label:"Date",sort:!0},{id:"value",label:"RSUP",sort:!0,align:"end"}],d=[{id:"date",label:"Date",sort:!0},{id:"value",label:"RSUP",sort:!0,align:"end"}],{sorting:f,onSort:D}=Z("date"),{sorting:g,onSort:h}=Z("date"),{sorting:_,onSort:q}=Z("date"),u=A(()=>{var p;return(((p=o.value)==null?void 0:p.history)??[]).orderBy(v=>{switch(f.value.column){case"date":return v.timestamp.getTime();case"value":return v.value;default:return 0}},f.value.order)}),S=A(()=>{var p;return(((p=s.value)==null?void 0:p.history)??[]).orderBy(v=>{switch(g.value.column){case"date":return v.timestamp.getTime();case"value":return v.value;default:return 0}},g.value.order)}),j=A(()=>{var p;return(((p=n.value)==null?void 0:p.history)??[]).orderBy(v=>{switch(_.value.column){case"date":return v.timestamp.getTime();case"value":return v.value;default:return 0}},_.value.order)}),{page:w,rowsPage:x,onPage:C}=Y(u,L),{page:c,rowsPage:$,onPage:H}=Y(S,L),{page:U,rowsPage:N,onPage:O}=Y(j,L);return(p,v)=>{const W=ke,me=$e,z=Ce,J=ne,G=we,de=ee;return y(),T(de,null,{title:m(()=>[l(me,{active:a(i),onTab:v[0]||(v[0]=b=>i.value=b.index)},{default:m(()=>[l(W,{header:"Redemptions"}),l(W,{header:"Team Airdrops"}),l(W,{header:"Victims Airdrops"})]),_:1},8,["active"])]),actions:m(()=>[a(i)===0?(y(),T(z,{key:0,"items-count":a(u).length,"items-per-page":L,page:a(w),onPage:a(C)},null,8,["items-count","page","onPage"])):K("",!0),a(i)===1?(y(),T(z,{key:1,"items-count":a(S).length,"items-per-page":L,page:a(c),onPage:a(H)},null,8,["items-count","page","onPage"])):K("",!0),a(i)===2?(y(),T(z,{key:2,"items-count":a(j).length,"items-per-page":L,page:a(U),onPage:a(O)},null,8,["items-count","page","onPage"])):K("",!0)]),default:m(()=>[a(i)===0?(y(),T(G,{key:0,class:"redemptions-table",rows:a(x),columns:P,sorting:a(f),onSortColumn:a(D)},{row:m(({item:b})=>[V("div",null,X(b.timestamp.toLocaleDateString()),1),V("div",rt,[l(J,{type:"dollar",value:b.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):K("",!0),a(i)===1?(y(),T(G,{key:1,class:"airdrops-table",rows:a($),columns:d,sorting:a(g),onSortColumn:a(h)},{row:m(({item:b})=>[V("div",null,X(b.timestamp.toLocaleDateString()),1),V("div",st,[l(J,{type:"dollar",value:b.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):K("",!0),a(i)===2?(y(),T(G,{key:2,class:"airdrops-table",rows:a(N),columns:d,sorting:a(_),onSortColumn:a(q)},{row:m(({item:b})=>[V("div",null,X(b.timestamp.toLocaleDateString()),1),V("div",nt,[l(J,{type:"dollar",value:b.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):K("",!0)]),_:1})}}}),lt=E(it,[["__scopeId","data-v-a1af03d1"]]),ct={class:"dashboard"},ut=Q({__name:"Vesting.page",setup(e){return(t,o)=>{const s=ge;return y(),re("div",ct,[l(s,{style:{"grid-area":"header"},title:"Vesting",description:"Token vesting, distribution, and circulating supply metrics"}),l(ot,{style:{"grid-area":"highlights"}}),l(Ze,{style:{"grid-area":"projections"}}),l(et,{style:{"grid-area":"supply"}}),l(lt,{style:{"grid-area":"table"}})])}}}),jt=E(ut,[["__scopeId","data-v-3a8096d7"]]);export{jt as default};
