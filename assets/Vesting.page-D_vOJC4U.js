import{_ as ye}from"./DashboardHeader-CAoK42m4.js";import{am as I,d as N,u as ne,c as b,a as he,w as fe,b as V,o as y,e as p,f as S,g as i,h as a,_ as ae,l as W,j as ie,k as Y,ai as Ae,an as L,m as Z}from"./index-Dn4CPbex.js";import{u as Pe,_ as be}from"./UseLegend-zMK_jx4K.js";import{u as Te,a as Ve,_ as Se}from"./UseLightweightChart-COT6E8SK.js";import{t as le,f as F,a as R,r as we,u as Ce}from"./timestamp-DOqFwE4S.js";import{o as h,n as J,s as m,a as oe,f as U,g as D,_ as ce}from"./AsyncValue-BiJ5akq4.js";import{_ as $e}from"./ChartApex-46JiMDhP.js";import{_ as je}from"./KPI-D3DUNtex.js";import{_ as ke}from"./Table-B5YLxs-C.js";import{u as ee,_ as Fe}from"./UsePagination-C1liwRbF.js";import{_ as Re,a as De}from"./TabItem.vue_vue_type_script_setup_true_lang-DLhPEkiK.js";import{u as te}from"./UseSort-D1jx-sQq.js";import"./Tooltip-Cc6MF7Zs.js";const se=h({value:m(),timestamp:J()}).transform(e=>({value:parseFloat(e.value),timestamp:le(e.timestamp)})),qe=h({total_allocation:m(),claim_count:J(),total_claimed:m(),history:oe(se),total_redeemed:m()}).transform(e=>({totalAllocation:parseFloat(e.total_allocation),claimCount:e.claim_count,totalClaimed:parseFloat(e.total_claimed),history:e.history,totalRedeemed:parseFloat(e.total_redeemed)})),re=h({projection:oe(se),total_vested:m(),current_unlocked:m(),current_timestamp:J()}).transform(e=>({projection:e.projection,totalVested:parseFloat(e.total_vested),unlocked:parseFloat(e.current_unlocked),time:le(e.current_timestamp)})),ue=h({total_allocation:m(),claim_count:J(),total_claimed:m(),history:oe(se)}).transform(e=>({totalAllocation:parseFloat(e.total_allocation),claimCount:e.claim_count,totalClaimed:parseFloat(e.total_claimed),history:e.history})),xe=h({total_supply:m(),perma_staked:m(),airdrop_vesting:m(),redemption_vesting:m(),treasury_vesting:m(),licensing_vesting:m(),circulating_supply:m()}).transform(e=>({totalSupply:parseFloat(e.total_supply),permaStaked:parseFloat(e.perma_staked),airdropVesting:parseFloat(e.airdrop_vesting),redemptionVesting:parseFloat(e.redemption_vesting),treasuryVesting:parseFloat(e.treasury_vesting),licensingVesting:parseFloat(e.licensing_vesting),circulatingSupply:parseFloat(e.circulating_supply)})),Ke=h({...U});async function Le(e,t){const o=D(t),{chain:s}=Ke.parse(e),r=await F(`${o}/v1/vesting/${s}/redemptions`,void 0,t==null?void 0:t.signal);return qe.parse(r)}const Be=h({...U});async function Ie(e,t){const o=D(t),{chain:s}=Be.parse(e),r=await F(`${o}/v1/vesting/${s}/redemptions/projection`,void 0,t==null?void 0:t.signal);return re.parse(r)}const Ue=h({...U});async function Ne(e,t){const o=D(t),{chain:s}=Ue.parse(e),r=await F(`${o}/v1/vesting/${s}/airdrops/team`,void 0,t==null?void 0:t.signal);return ue.parse(r)}const Oe=h({...U});async function Ee(e,t){const o=D(t),{chain:s}=Oe.parse(e),r=await F(`${o}/v1/vesting/${s}/airdrops/team/projection`,void 0,t==null?void 0:t.signal);return re.parse(r)}const He=h({...U});async function We(e,t){const o=D(t),{chain:s}=He.parse(e),r=await F(`${o}/v1/vesting/${s}/airdrops/victims`,void 0,t==null?void 0:t.signal);return ue.parse(r)}const Je=h({...U});async function Qe(e,t){const o=D(t),{chain:s}=Je.parse(e),r=await F(`${o}/v1/vesting/${s}/airdrops/victims/projection`,void 0,t==null?void 0:t.signal);return re.parse(r)}async function ze(e){const t=D(e),o=await F(`${t}/v1/vesting/circulating_supply`,void 0,e==null?void 0:e.signal);return xe.parse(o)}function pe(e){return R({queryKey:["vesting-redemptions",e],queryFn:()=>Le(I(e))})}function Ge(e){return R({queryKey:["vesting-redemptions-projection",e],queryFn:()=>Ie(I(e))})}function me(e){return R({queryKey:["vesting-airdrops-team",e],queryFn:()=>Ne(I(e))})}function Me(e){return R({queryKey:["vesting-airdrops-team-projection",e],queryFn:()=>Ee(I(e))})}function de(e){return R({queryKey:["vesting-airdrops-victims",e],queryFn:()=>We(I(e))})}function Xe(e){return R({queryKey:["vesting-airdrops-victims-projection",e],queryFn:()=>Qe(I(e))})}function ge(){return R({queryKey:["vesting-circulating-supply"],queryFn:()=>ze()})}const Ye={style:{display:"flex"}},Ze={class:"actions-secondary"},et={ref:"chartRef",class:"chart"},tt=N({__name:"ChartProjections",setup(e){const t={chain:"ethereum"},{data:o}=Ge(t),{data:s}=Me(t),{data:r}=Xe(t),n=ne(),{items:T,toggles:d,disabled:f}=Pe(()=>[{id:"victimsAirdrops",label:"Victims Airdrops",color:n.value.colorsArray[2],togglable:!0},{id:"teamAirdrops",label:"Team Airdrops",color:n.value.colorsArray[1],togglable:!0},{id:"redemptions",label:"Redemptions",color:n.value.colorsArray[0],togglable:!0}]),q=b(()=>{if(!o.value||!s.value||!r.value)return[];const c=new Set;for(const l of o.value.projection)c.add(l.timestamp.getTime());for(const l of s.value.projection)c.add(l.timestamp.getTime());for(const l of r.value.projection)c.add(l.timestamp.getTime());const C=Array.from(c).sort(),w=r.value.projection.map(l=>({time:l.timestamp.getTime(),value:l.value})).sort((l,k)=>l.time-k.time),$=s.value.projection.map(l=>({time:l.timestamp.getTime(),value:l.value})).sort((l,k)=>l.time-k.time);let K=w.length>0?w[w.length-1].value:0,j=$.length>0?$[$.length-1].value:0;return C.map(l=>{var H;const k=new Date(l),Q=((H=o.value.projection.find(u=>u.timestamp.getTime()===l))==null?void 0:H.value)||0,O=s.value.projection.find(u=>u.timestamp.getTime()===l);O&&(j=O.value);const E=r.value.projection.find(u=>u.timestamp.getTime()===l);return E&&(K=E.value),{time:k.getUTCTimestamp(),values:[d.victimsAirdrops.value?K:0,d.teamAirdrops.value?j:0,d.redemptions.value?Q:0]}})}),g=he("card"),{chart:A,series:_}=Te({createChartOptions:Ve(),series:{type:"StackedArea",name:"stacked",options:b(()=>({priceFormat:{type:"custom",formatter:c=>`${we(c,0,"dollar")}${Ce(c)}`},colors:[{line:n.value.colorsArray[2],area:`${n.value.colorsArray[2]}33`},{line:n.value.colorsArray[1],area:`${n.value.colorsArray[1]}33`},{line:n.value.colorsArray[0],area:`${n.value.colorsArray[0]}33`}],lineWidth:2,lastValueVisible:!1,priceLineVisible:!1}))}});fe(x);function x(){if(!A.value||!_.stacked)return;const c=q.value;c.length>0&&_.stacked.setData(c),A.value.timeScale().fitContent()}return(c,C)=>{const w=Se,$=be,K=ae;return y(),V(K,{ref_key:"card",ref:g,title:"Vesting Projections",class:"stack-actions"},{actions:p(()=>[S("div",Ye,[i(w,{chart:a(A),target:a(g)},null,8,["chart","target"])])]),"actions-secondary":p(()=>[S("div",Ze,[i($,{items:a(T),disabled:a(f),onToggle:C[0]||(C[0]=j=>a(d)[j].value=!a(d)[j].value)},null,8,["items","disabled"])])]),default:p(()=>[S("div",et,null,512)]),_:1},512)}}}),at=W(tt,[["__scopeId","data-v-20ce05e9"]]),ot=N({__name:"ChartSupplyDistribution",setup(e){const{data:t}=ge(),o=ne(),s=b(()=>t.value?[t.value.circulatingSupply,t.value.permaStaked,t.value.redemptionVesting,t.value.airdropVesting,t.value.treasuryVesting,t.value.licensingVesting]:[]),r=["Circulating Supply","Perma Staked","Redemption Vesting","Airdrop Vesting","Treasury Vesting","Licensing Vesting"],n=b(()=>({chart:{type:"pie",height:350},colors:[`${o.value.colorsArray[0]}88`,`${o.value.colorsArray[2]}88`,`${o.value.colorsArray[1]}88`,`${o.value.colorsArray[3]}88`,`${o.value.colorsArray[4]}88`,`${o.value.colorsArray[0]}aa`],labels:r,legend:{labels:{colors:o.value.colors.text}}}));return(T,d)=>{const f=$e,q=ae;return y(),V(q,{ref:"supplyCard",title:"Token Supply Distribution"},{default:p(()=>[i(f,{options:n.value,series:s.value},null,8,["options","series"])]),_:1},512)}}}),st={class:"kpis"},rt=N({__name:"KPIs",setup(e){const t={chain:"ethereum"},{data:o}=pe(t),{data:s}=me(t),{data:r}=de(t),{data:n}=ge(),T=b(()=>!o.value||!s.value||!r.value?null:o.value.totalAllocation+s.value.totalAllocation+r.value.totalAllocation),d=b(()=>!o.value||!s.value||!r.value?null:o.value.totalClaimed+s.value.totalClaimed+r.value.totalClaimed),f=b(()=>!T.value||!d.value?null:d.value/T.value*100);return(q,g)=>{var x;const A=ce,_=je;return y(),ie("div",st,[i(_,{label:"Total Allocated","has-value":!!a(T)},{default:p(()=>[i(A,{type:"dollar",value:a(T),precision:2,"show-symbol":!1},null,8,["value"]),g[0]||(g[0]=Y(" reUSD "))]),_:1,__:[0]},8,["has-value"]),i(_,{label:"Total Claimed","has-value":!!a(d)},{default:p(()=>[i(A,{type:"dollar",value:a(d),precision:2,"show-symbol":!1},null,8,["value"]),g[1]||(g[1]=Y(" reUSD "))]),_:1,__:[1]},8,["has-value"]),i(_,{label:"Claim Percentage","has-value":!!a(f)},{default:p(()=>[i(A,{type:"percentage",value:a(f),precision:2},null,8,["value"])]),_:1},8,["has-value"]),i(_,{label:"Circulating Supply","has-value":!!((x=a(n))!=null&&x.circulatingSupply)},{default:p(()=>{var c;return[i(A,{type:"dollar",value:(c=a(n))==null?void 0:c.circulatingSupply,precision:2,"show-symbol":!1},null,8,["value"]),g[2]||(g[2]=Y(" reUSD "))]}),_:1,__:[2]},8,["has-value"])])}}}),nt=W(rt,[["__scopeId","data-v-01b8fbf1"]]),it={class:"end"},lt={class:"end"},ct={class:"end"},B=10,ut=N({__name:"TableVesting",setup(e){const t={chain:"ethereum"},{data:o}=pe(t),{data:s}=me(t),{data:r}=de(t),n=Ae(0),T=[{id:"date",label:"Date",sort:!0},{id:"value",label:"RSUP",sort:!0,align:"end"}],d=[{id:"date",label:"Date",sort:!0},{id:"value",label:"RSUP",sort:!0,align:"end"}],{sorting:f,onSort:q}=te("date"),{sorting:g,onSort:A}=te("date"),{sorting:_,onSort:x}=te("date"),c=b(()=>{var u;return(((u=o.value)==null?void 0:u.history)??[]).orderBy(v=>{switch(f.value.column){case"date":return v.timestamp.getTime();case"value":return v.value;default:return 0}},f.value.order)}),C=b(()=>{var u;return(((u=s.value)==null?void 0:u.history)??[]).orderBy(v=>{switch(g.value.column){case"date":return v.timestamp.getTime();case"value":return v.value;default:return 0}},g.value.order)}),w=b(()=>{var u;return(((u=r.value)==null?void 0:u.history)??[]).orderBy(v=>{switch(_.value.column){case"date":return v.timestamp.getTime();case"value":return v.value;default:return 0}},_.value.order)}),{page:$,rowsPage:K,onPage:j}=ee(c,B),{page:l,rowsPage:k,onPage:Q}=ee(C,B),{page:O,rowsPage:E,onPage:H}=ee(w,B);return(u,v)=>{const z=De,_e=Re,G=Fe,M=ce,X=ke,ve=ae;return y(),V(ve,null,{title:p(()=>[i(_e,{active:a(n),onTab:v[0]||(v[0]=P=>n.value=P.index)},{default:p(()=>[i(z,{header:"Redemptions"}),i(z,{header:"Team Airdrops"}),i(z,{header:"Victims Airdrops"})]),_:1},8,["active"])]),actions:p(()=>[a(n)===0?(y(),V(G,{key:0,"items-count":a(c).length,"items-per-page":B,page:a($),onPage:a(j)},null,8,["items-count","page","onPage"])):L("",!0),a(n)===1?(y(),V(G,{key:1,"items-count":a(C).length,"items-per-page":B,page:a(l),onPage:a(Q)},null,8,["items-count","page","onPage"])):L("",!0),a(n)===2?(y(),V(G,{key:2,"items-count":a(w).length,"items-per-page":B,page:a(O),onPage:a(H)},null,8,["items-count","page","onPage"])):L("",!0)]),default:p(()=>[a(n)===0?(y(),V(X,{key:0,class:"redemptions-table",rows:a(K),columns:T,sorting:a(f),onSortColumn:a(q)},{row:p(({item:P})=>[S("div",null,Z(P.timestamp.toLocaleDateString()),1),S("div",it,[i(M,{type:"dollar",value:P.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):L("",!0),a(n)===1?(y(),V(X,{key:1,class:"airdrops-table",rows:a(k),columns:d,sorting:a(g),onSortColumn:a(A)},{row:p(({item:P})=>[S("div",null,Z(P.timestamp.toLocaleDateString()),1),S("div",lt,[i(M,{type:"dollar",value:P.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):L("",!0),a(n)===2?(y(),V(X,{key:2,class:"airdrops-table",rows:a(E),columns:d,sorting:a(_),onSortColumn:a(x)},{row:p(({item:P})=>[S("div",null,Z(P.timestamp.toLocaleDateString()),1),S("div",ct,[i(M,{type:"dollar",value:P.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):L("",!0)]),_:1})}}}),pt=W(ut,[["__scopeId","data-v-8989e3b9"]]),mt={class:"dashboard"},dt=N({__name:"Vesting.page",setup(e){return(t,o)=>{const s=ye;return y(),ie("div",mt,[i(s,{style:{"grid-area":"header"},title:"Vesting",description:"Token vesting, distribution, and circulating supply metrics"}),i(nt,{style:{"grid-area":"highlights"}}),i(at,{style:{"grid-area":"projections"}}),i(ot,{style:{"grid-area":"supply"}}),i(pt,{style:{"grid-area":"table"}})])}}}),Ct=W(dt,[["__scopeId","data-v-3a8096d7"]]);export{Ct as default};
