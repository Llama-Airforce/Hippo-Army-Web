var ft=s=>{throw TypeError(s)};var Y=(s,t,e)=>t.has(s)||ft("Cannot "+e);var i=(s,t,e)=>(Y(s,t,"read from private field"),e?e.call(s):t.get(s)),p=(s,t,e)=>t.has(s)?ft("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),l=(s,t,e,n)=>(Y(s,t,"write to private field"),n?n.call(s,e):t.set(s,e),e),f=(s,t,e)=>(Y(s,t,"access private method"),e);import{ae as Ut,af as pt,ag as w,ah as _,ai as K,aj as Ft,ak as bt,al as vt,am as Qt,an as Tt,ao as Dt,ap as yt,aq as Mt,ar as jt,c as tt,as as kt,at as xt,p as W,au as mt,av as Lt,aw as gt,ax as Pt,d as Bt,r as At,b as Z,o as G,v as q,f as Nt,g as Rt,u as St,_ as Vt}from"./index-DsSu0Rud.js";var m,a,z,v,F,B,I,S,H,A,N,Q,T,E,V,u,$,et,st,it,nt,at,rt,ot,Et,It,Wt=(It=class extends Ut{constructor(t,e){super();p(this,u);p(this,m);p(this,a);p(this,z);p(this,v);p(this,F);p(this,B);p(this,I);p(this,S);p(this,H);p(this,A);p(this,N);p(this,Q);p(this,T);p(this,E);p(this,V,new Set);this.options=e,l(this,m,t),l(this,S,null),l(this,I,pt()),this.options.experimental_prefetchInRender||i(this,I).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(i(this,a).addObserver(this),wt(i(this,a),this.options)?f(this,u,$).call(this):this.updateResult(),f(this,u,nt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ht(i(this,a),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ht(i(this,a),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,f(this,u,at).call(this),f(this,u,rt).call(this),i(this,a).removeObserver(this)}setOptions(t,e){const n=this.options,o=i(this,a);if(this.options=i(this,m).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof w(this.options.enabled,i(this,a))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");f(this,u,ot).call(this),i(this,a).setOptions(this.options),n._defaulted&&!_(this.options,n)&&i(this,m).getQueryCache().notify({type:"observerOptionsUpdated",query:i(this,a),observer:this});const h=this.hasListeners();h&&Ot(i(this,a),o,this.options,n)&&f(this,u,$).call(this),this.updateResult(e),h&&(i(this,a)!==o||w(this.options.enabled,i(this,a))!==w(n.enabled,i(this,a))||K(this.options.staleTime,i(this,a))!==K(n.staleTime,i(this,a)))&&f(this,u,et).call(this);const c=f(this,u,st).call(this);h&&(i(this,a)!==o||w(this.options.enabled,i(this,a))!==w(n.enabled,i(this,a))||c!==i(this,E))&&f(this,u,it).call(this,c)}getOptimisticResult(t){const e=i(this,m).getQueryCache().build(i(this,m),t),n=this.createResult(e,t);return zt(this,n)&&(l(this,v,n),l(this,B,this.options),l(this,F,i(this,a).state)),n}getCurrentResult(){return i(this,v)}trackResult(t,e){const n={};return Object.keys(t).forEach(o=>{Object.defineProperty(n,o,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(o),e==null||e(o),t[o])})}),n}trackProp(t){i(this,V).add(t)}getCurrentQuery(){return i(this,a)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=i(this,m).defaultQueryOptions(t),n=i(this,m).getQueryCache().build(i(this,m),e);return n.fetch().then(()=>this.createResult(n,e))}fetch(t){return f(this,u,$).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),i(this,v)))}createResult(t,e){var dt;const n=i(this,a),o=this.options,h=i(this,v),c=i(this,F),y=i(this,B),M=t!==n?t.state:i(this,z),{state:C}=t;let d={...C},U=!1,r;if(e._optimisticResults){const b=this.hasListeners(),L=!b&&wt(t,e),P=b&&Ot(t,n,e,o);(L||P)&&(d={...d,...Dt(C.data,t.options)}),e._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:O,errorUpdatedAt:j,status:g}=d;if(e.select&&d.data!==void 0)if(h&&d.data===(c==null?void 0:c.data)&&e.select===i(this,H))r=i(this,A);else try{l(this,H,e.select),r=e.select(d.data),r=yt(h==null?void 0:h.data,r,e),l(this,A,r),l(this,S,null)}catch(b){l(this,S,b)}else r=d.data;if(e.placeholderData!==void 0&&r===void 0&&g==="pending"){let b;if(h!=null&&h.isPlaceholderData&&e.placeholderData===(y==null?void 0:y.placeholderData))b=h.data;else if(b=typeof e.placeholderData=="function"?e.placeholderData((dt=i(this,N))==null?void 0:dt.state.data,i(this,N)):e.placeholderData,e.select&&b!==void 0)try{b=e.select(b),l(this,S,null)}catch(L){l(this,S,L)}b!==void 0&&(g="success",r=yt(h==null?void 0:h.data,b,e),U=!0)}i(this,S)&&(O=i(this,S),r=i(this,A),j=Date.now(),g="error");const k=d.fetchStatus==="fetching",x=g==="pending",X=g==="error",ct=x&&k,lt=r!==void 0,R={status:g,fetchStatus:d.fetchStatus,isPending:x,isSuccess:g==="success",isError:X,isInitialLoading:ct,isLoading:ct,data:r,dataUpdatedAt:d.dataUpdatedAt,error:O,errorUpdatedAt:j,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>M.dataUpdateCount||d.errorUpdateCount>M.errorUpdateCount,isFetching:k,isRefetching:k&&!x,isLoadingError:X&&!lt,isPaused:d.fetchStatus==="paused",isPlaceholderData:U,isRefetchError:X&&lt,isStale:ut(t,e),refetch:this.refetch,promise:i(this,I)};if(this.options.experimental_prefetchInRender){const b=J=>{R.status==="error"?J.reject(R.error):R.data!==void 0&&J.resolve(R.data)},L=()=>{const J=l(this,I,R.promise=pt());b(J)},P=i(this,I);switch(P.status){case"pending":t.queryHash===n.queryHash&&b(P);break;case"fulfilled":(R.status==="error"||R.data!==P.value)&&L();break;case"rejected":(R.status!=="error"||R.error!==P.reason)&&L();break}}return R}updateResult(t){const e=i(this,v),n=this.createResult(i(this,a),this.options);if(l(this,F,i(this,a).state),l(this,B,this.options),i(this,F).data!==void 0&&l(this,N,i(this,a)),_(n,e))return;l(this,v,n);const o={},h=()=>{if(!e)return!0;const{notifyOnChangeProps:c}=this.options,y=typeof c=="function"?c():c;if(y==="all"||!y&&!i(this,V).size)return!0;const D=new Set(y??i(this,V));return this.options.throwOnError&&D.add("error"),Object.keys(i(this,v)).some(M=>{const C=M;return i(this,v)[C]!==e[C]&&D.has(C)})};(t==null?void 0:t.listeners)!==!1&&h()&&(o.listeners=!0),f(this,u,Et).call(this,{...o,...t})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&f(this,u,nt).call(this)}},m=new WeakMap,a=new WeakMap,z=new WeakMap,v=new WeakMap,F=new WeakMap,B=new WeakMap,I=new WeakMap,S=new WeakMap,H=new WeakMap,A=new WeakMap,N=new WeakMap,Q=new WeakMap,T=new WeakMap,E=new WeakMap,V=new WeakMap,u=new WeakSet,$=function(t){f(this,u,ot).call(this);let e=i(this,a).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(Ft)),e},et=function(){f(this,u,at).call(this);const t=K(this.options.staleTime,i(this,a));if(bt||i(this,v).isStale||!vt(t))return;const n=Qt(i(this,v).dataUpdatedAt,t)+1;l(this,Q,setTimeout(()=>{i(this,v).isStale||this.updateResult()},n))},st=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(i(this,a)):this.options.refetchInterval)??!1},it=function(t){f(this,u,rt).call(this),l(this,E,t),!(bt||w(this.options.enabled,i(this,a))===!1||!vt(i(this,E))||i(this,E)===0)&&l(this,T,setInterval(()=>{(this.options.refetchIntervalInBackground||Tt.isFocused())&&f(this,u,$).call(this)},i(this,E)))},nt=function(){f(this,u,et).call(this),f(this,u,it).call(this,f(this,u,st).call(this))},at=function(){i(this,Q)&&(clearTimeout(i(this,Q)),l(this,Q,void 0))},rt=function(){i(this,T)&&(clearInterval(i(this,T)),l(this,T,void 0))},ot=function(){const t=i(this,m).getQueryCache().build(i(this,m),this.options);if(t===i(this,a))return;const e=i(this,a);l(this,a,t),l(this,z,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},Et=function(t){Mt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(i(this,v))}),i(this,m).getQueryCache().notify({query:i(this,a),type:"observerResultsUpdated"})})},It);function $t(s,t){return w(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function wt(s,t){return $t(s,t)||s.state.data!==void 0&&ht(s,t,t.refetchOnMount)}function ht(s,t,e){if(w(t.enabled,s)!==!1){const n=typeof e=="function"?e(s):e;return n==="always"||n!==!1&&ut(s,t)}return!1}function Ot(s,t,e,n){return(s!==t||w(n.enabled,s)===!1)&&(!e.suspense||s.state.status!=="error")&&ut(s,e)}function ut(s,t){return w(t.enabled,s)!==!1&&s.isStaleByTime(K(t.staleTime,s))}function zt(s,t){return!_(s.getCurrentResult(),t)}function Ht(s,t,e){const n=jt(),o=tt(()=>{const r=kt(t);typeof r.enabled=="function"&&(r.enabled=r.enabled());const O=n.defaultQueryOptions(r);return O._optimisticResults=n.isRestoring.value?"isRestoring":"optimistic",O}),h=new s(n,o.value),c=xt(h.getCurrentResult());let y=()=>{};W(n.isRestoring,r=>{r||(y(),y=h.subscribe(O=>{mt(c,O)}))},{immediate:!0});const D=()=>{h.setOptions(o.value),mt(c,h.getCurrentResult())};W(o,D),Lt(()=>{y()});const M=(...r)=>(D(),c.refetch(...r)),C=()=>new Promise((r,O)=>{let j=()=>{};const g=()=>{if(o.value.enabled!==!1){h.setOptions(o.value);const k=h.getOptimisticResult(o.value);k.isStale?(j(),h.fetchOptimistic(o.value).then(r,x=>{gt(o.value.throwOnError,[x,h.getCurrentQuery()])?O(x):r(h.getCurrentResult())})):(j(),r(k))}};g(),j=W(o,g)});W(()=>c.error,r=>{if(c.isError&&!c.isFetching&&gt(o.value.throwOnError,[r,h.getCurrentQuery()]))throw r});const U=Pt(c);for(const r in c)typeof c[r]=="function"&&(U[r]=c[r]);return U.suspense=C,U.refetch=M,U}function ae(s,t){return Ht(Wt,s)}function Ct(s){const t=["","k","m","b","t"],e=Math.max(0,Math.min(t.length-1,Math.floor(Math.log10(Math.abs(s))/3)));return t[e]}function Jt(s,t=0,e=""){if(e==="dollar"){const o=Math.floor(Math.log10(Math.abs(s))/3)*3;s/=o>0?10**o:1}const n=t===1/0?void 0:{minimumFractionDigits:t,maximumFractionDigits:t};return s.toLocaleString(void 0,n)}const Zt={class:"async-value"},Gt={key:0,class:"symbol"},Kt={class:"value"},Xt={key:1,class:"unit"},Yt={key:2,class:"symbol"},qt="|/-\\",_t=Bt({__name:"AsyncValue",props:{value:{default:null},type:{default:null},precision:{type:[Number,Function],default:2},showUnit:{type:Boolean,default:!0},showSymbol:{type:Boolean,default:!0},showZero:{type:Boolean,default:!1}},setup(s){let t=0,e=0;const n=At("|"),o=tt(()=>typeof s.value=="string"?s.value:s.value===1/0?"∞":s.value===-1/0?"-∞":s.value?Jt(s.value,typeof s.precision=="function"?s.precision(s.value):s.precision,s.type??""):s.value===0&&s.showZero?"0":s.value===null||s.value===void 0?n.value:"?"),h=tt(()=>s.precision===1/0||!s.type||typeof s.value=="string"?"":!s.value||!isFinite(s.value)?s.showUnit?Ct(0):"":Ct(s.value));return W(()=>s.value,c=>{if(clearInterval(e),t=0,c)return;const y=()=>{t=(t+1)%4,n.value=qt[t]};e=window.setInterval(y,250)},{immediate:!0}),(c,y)=>(G(),Z("div",Zt,[c.showSymbol&&c.type==="dollar"?(G(),Z("span",Gt," $ ")):q("",!0),Nt("span",Kt,Rt(St(o)),1),c.showUnit?(G(),Z("span",Xt,Rt(St(h)),1)):q("",!0),c.showSymbol&&c.type==="percentage"?(G(),Z("span",Yt," % ")):q("",!0)]))}}),re=Vt(_t,[["__scopeId","data-v-c17e757f"]]),oe=s=>{const t=new URLSearchParams(Object.entries(s).filter(([e,n])=>n!=null).map(([e,n])=>[e,n.toString()])).toString();return t&&`?${t}`};class te extends Error{constructor(t,e){super(e),this.status=t}}async function ee(s,t,e){const n=await fetch(s,{method:t?"POST":"GET",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t),signal:e});if(!n.ok)throw new te(n.status,`Fetch error ${n.status} for URL: ${s}`);return n}async function he(s,t,e){return await(await ee(s,t,e)).json()}export{re as _,oe as a,Ct as b,he as f,Jt as r,ae as u};
