import{f as m,a as v}from"./fetch-DRLrqTU_.js";import{o as a,s as o,n as t,a as p,t as _,h as u,p as F,g as b}from"./timestamp-D2Yelcgj.js";import{u as g}from"./Number-BVeBD89l.js";import{p as d}from"./Pagination-vgbH7lYO.js";import{at as k}from"./index-Ci__0x6w.js";const w=a({name:o(),protocol_id:t(),pairs_count:t(),active_positions_count:t(),total_collateral:o(),total_debt:o()}).transform(e=>({name:e.name,protocolId:e.protocol_id,pairsCount:e.pairs_count,activePositionsCount:e.active_positions_count,totalCollateral:parseFloat(e.total_collateral),totalDebt:parseFloat(e.total_debt)})),h=a({protocols:p(w),count:t()}).transform(e=>({protocols:e.protocols,count:e.count})),l=a({symbol:o(),name:o(),address:o(),precision:t()}).transform(e=>({symbol:e.symbol,name:e.name,address:e.address,precision:e.precision})),P=a({token_address:o(),token_symbol:o(),apr:o()}).transform(e=>({tokenAddress:e.token_address,tokenSymbol:e.token_symbol,apr:parseFloat(e.apr)})),C=a({pair_id:t(),name:o(),address:o(),total_collateral:o(),total_underlying:o(),exchange_rate:o(),total_debt:o(),active_positions_count:t(),borrow_limit:o(),utilization_rate:o(),interest_rate:o(),claimable_fees:o(),claimable_other_fees:o(),block_timestamp:t(),last_redemption:t().nullable(),redemption_fee_10k:o(),borrow_cost_apr:o(),base_apr:o(),rewards:p(P),collateral_token:l,debt_token:l,underlying_token:l,pair_collateral_token:l,pair_underlying_token:l}).transform(e=>({pairId:e.pair_id,name:e.name,address:e.address,totalCollateral:parseFloat(e.total_collateral),totalUnderlying:parseFloat(e.total_underlying),exchangeRate:parseFloat(e.exchange_rate),totalDebt:parseFloat(e.total_debt),activePositionsCount:e.active_positions_count,borrowLimit:parseFloat(e.borrow_limit),utilizationRate:parseFloat(e.utilization_rate),interestRate:parseFloat(e.interest_rate),claimableFees:parseFloat(e.claimable_fees),claimableOtherFees:parseFloat(e.claimable_other_fees),blockTime:_(e.block_timestamp),lastRedemption:e.last_redemption?_(e.last_redemption):null,redemptionFee10k:parseFloat(e.redemption_fee_10k),aprBorrowCost:parseFloat(e.borrow_cost_apr),aprBase:parseFloat(e.base_apr),rewards:e.rewards,tokenCollateral:e.collateral_token,tokenDebt:e.debt_token,tokenUnderlying:e.underlying_token,tokenPairCollateral:e.pair_collateral_token,tokenPairUnderyling:e.pair_underlying_token})),D=a({pairs:p(C),count:t(),page:t(),total_pages:t()}).transform(e=>({pairs:e.pairs,count:e.count,page:e.page,totalPages:e.total_pages})),R=a(u);async function $(e,r){const i=b(),{chain:s}=R.parse(e),n=await m(`${i}/v1/protocols/overview/${s}`,void 0,r==null?void 0:r.signal);return h.parse(n)}const q=a({...u,...F,protocol_name:o()});async function x(e,r){const i=b(),{chain:s,protocol_name:n,...c}=q.parse(e),y=v(c),f=await m(`${i}/v1/protocols/${s}/${n}/pairs${y}`,void 0,r==null?void 0:r.signal);return D.parse(f)}function I(e){return g({queryKey:["protocols-overview",e],queryFn:()=>$(k(e))})}function K(e,r){return g({queryKey:["protocols-pairs",e],queryFn:()=>d((s,n)=>x({...k(e),page:s,per_page:n}).then(c=>c.pairs),1,100),enabled:r})}export{I as a,K as u};
