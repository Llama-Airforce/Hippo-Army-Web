import{_ as ye}from"./DashboardHeader-B9DjZVb_.js";import{at as I,d as N,az as ne,c as b,av as he,aA as fe,j as V,o as y,w as p,f as S,e as i,u as a,h as ae,_ as W,b as ie,i as Y,ae as Ae,ay as L,g as Z}from"./index-Ci__0x6w.js";import{u as Pe,_ as be}from"./UseLegend-BWAKSbnJ.js";import{u as Te,a as Ve,_ as Se}from"./UseLightweightChart-CtaEGqrD.js";import{f as F,_ as le}from"./fetch-DRLrqTU_.js";import{o as h,n as z,s as m,t as ce,a as oe,h as U,g as R}from"./timestamp-D2Yelcgj.js";import{u as D,r as we,a as Ce}from"./Number-BVeBD89l.js";import{_ as $e}from"./ChartApex-CC9fKWpe.js";import{_ as je}from"./KPI-DZVNiHl0.js";import{_ as ke}from"./Table-DgB77jpL.js";import{u as ee,_ as Fe}from"./UsePagination-DPOOP3UB.js";import{a as Re,_ as De}from"./TabItem.vue_vue_type_script_setup_true_lang-B1PPBc_Z.js";import{u as te}from"./UseSort-tD2evwKe.js";import"./Tooltip-CMs6kQZ9.js";const se=h({value:m(),timestamp:z()}).transform(e=>({value:parseFloat(e.value),timestamp:ce(e.timestamp)})),qe=h({total_allocation:m(),claim_count:z(),total_claimed:m(),history:oe(se),total_redeemed:m()}).transform(e=>({totalAllocation:parseFloat(e.total_allocation),claimCount:e.claim_count,totalClaimed:parseFloat(e.total_claimed),history:e.history,totalRedeemed:parseFloat(e.total_redeemed)})),re=h({projection:oe(se),total_vested:m(),current_unlocked:m(),current_timestamp:z()}).transform(e=>({projection:e.projection,totalVested:parseFloat(e.total_vested),unlocked:parseFloat(e.current_unlocked),time:ce(e.current_timestamp)})),ue=h({total_allocation:m(),claim_count:z(),total_claimed:m(),history:oe(se)}).transform(e=>({totalAllocation:parseFloat(e.total_allocation),claimCount:e.claim_count,totalClaimed:parseFloat(e.total_claimed),history:e.history})),xe=h({total_supply:m(),perma_staked:m(),airdrop_vesting:m(),redemption_vesting:m(),treasury_vesting:m(),licensing_vesting:m(),circulating_supply:m()}).transform(e=>({totalSupply:parseFloat(e.total_supply),permaStaked:parseFloat(e.perma_staked),airdropVesting:parseFloat(e.airdrop_vesting),redemptionVesting:parseFloat(e.redemption_vesting),treasuryVesting:parseFloat(e.treasury_vesting),licensingVesting:parseFloat(e.licensing_vesting),circulatingSupply:parseFloat(e.circulating_supply)})),Ke=h({...U});async function Le(e,t){const o=R(),{chain:s}=Ke.parse(e),r=await F(`${o}/v1/vesting/${s}/redemptions`,void 0,t==null?void 0:t.signal);return qe.parse(r)}const Be=h({...U});async function Ie(e,t){const o=R(),{chain:s}=Be.parse(e),r=await F(`${o}/v1/vesting/${s}/redemptions/projection`,void 0,t==null?void 0:t.signal);return re.parse(r)}const Ue=h({...U});async function Ne(e,t){const o=R(),{chain:s}=Ue.parse(e),r=await F(`${o}/v1/vesting/${s}/airdrops/team`,void 0,t==null?void 0:t.signal);return ue.parse(r)}const Oe=h({...U});async function Ee(e,t){const o=R(),{chain:s}=Oe.parse(e),r=await F(`${o}/v1/vesting/${s}/airdrops/team/projection`,void 0,t==null?void 0:t.signal);return re.parse(r)}const He=h({...U});async function We(e,t){const o=R(),{chain:s}=He.parse(e),r=await F(`${o}/v1/vesting/${s}/airdrops/victims`,void 0,t==null?void 0:t.signal);return ue.parse(r)}const ze=h({...U});async function Je(e,t){const o=R(),{chain:s}=ze.parse(e),r=await F(`${o}/v1/vesting/${s}/airdrops/victims/projection`,void 0,t==null?void 0:t.signal);return re.parse(r)}async function Qe(e){const t=R(),o=await F(`${t}/v1/vesting/circulating_supply`,void 0,e==null?void 0:e.signal);return xe.parse(o)}function pe(e){return D({queryKey:["vesting-redemptions",e],queryFn:()=>Le(I(e))})}function Ge(e){return D({queryKey:["vesting-redemptions-projection",e],queryFn:()=>Ie(I(e))})}function me(e){return D({queryKey:["vesting-airdrops-team",e],queryFn:()=>Ne(I(e))})}function Me(e){return D({queryKey:["vesting-airdrops-team-projection",e],queryFn:()=>Ee(I(e))})}function de(e){return D({queryKey:["vesting-airdrops-victims",e],queryFn:()=>We(I(e))})}function Xe(e){return D({queryKey:["vesting-airdrops-victims-projection",e],queryFn:()=>Je(I(e))})}function ge(){return D({queryKey:["vesting-circulating-supply"],queryFn:()=>Qe()})}const Ye={style:{display:"flex"}},Ze={class:"actions-secondary"},et={ref:"chartRef",class:"chart"},tt=N({__name:"ChartProjections",setup(e){const t={chain:"ethereum"},{data:o}=Ge(t),{data:s}=Me(t),{data:r}=Xe(t),n=ne(),{items:T,toggles:d,disabled:f}=Pe(()=>[{id:"victimsAirdrops",label:"Victims Airdrops",color:n.value.colorsArray[2],togglable:!0},{id:"teamAirdrops",label:"Team Airdrops",color:n.value.colorsArray[1],togglable:!0},{id:"redemptions",label:"Redemptions",color:n.value.colorsArray[0],togglable:!0}]),q=b(()=>{if(!o.value||!s.value||!r.value)return[];const c=new Set;for(const l of o.value.projection)c.add(l.timestamp.getTime());for(const l of s.value.projection)c.add(l.timestamp.getTime());for(const l of r.value.projection)c.add(l.timestamp.getTime());const C=Array.from(c).sort(),w=r.value.projection.map(l=>({time:l.timestamp.getTime(),value:l.value})).sort((l,k)=>l.time-k.time),$=s.value.projection.map(l=>({time:l.timestamp.getTime(),value:l.value})).sort((l,k)=>l.time-k.time);let K=w.length>0?w[w.length-1].value:0,j=$.length>0?$[$.length-1].value:0;return C.map(l=>{var H;const k=new Date(l),J=((H=o.value.projection.find(u=>u.timestamp.getTime()===l))==null?void 0:H.value)||0,O=s.value.projection.find(u=>u.timestamp.getTime()===l);O&&(j=O.value);const E=r.value.projection.find(u=>u.timestamp.getTime()===l);return E&&(K=E.value),{time:k.getUTCTimestamp(),values:[d.victimsAirdrops.value?K:0,d.teamAirdrops.value?j:0,d.redemptions.value?J:0]}})}),g=he("card"),{chart:A,series:_}=Te({createChartOptions:Ve(),series:{type:"StackedArea",name:"stacked",options:b(()=>({priceFormat:{type:"custom",formatter:c=>`${we(c,0,"dollar")}${Ce(c)}`},colors:[{line:n.value.colorsArray[2],area:`${n.value.colorsArray[2]}33`},{line:n.value.colorsArray[1],area:`${n.value.colorsArray[1]}33`},{line:n.value.colorsArray[0],area:`${n.value.colorsArray[0]}33`}],lineWidth:2,lastValueVisible:!1,priceLineVisible:!1}))}});fe(x);function x(){if(!A.value||!_.stacked)return;const c=q.value;c.length>0&&_.stacked.setData(c),A.value.timeScale().fitContent()}return(c,C)=>{const w=Se,$=be,K=ae;return y(),V(K,{ref_key:"card",ref:g,title:"Vesting Projections",class:"stack-actions"},{actions:p(()=>[S("div",Ye,[i(w,{chart:a(A),target:a(g)},null,8,["chart","target"])])]),"actions-secondary":p(()=>[S("div",Ze,[i($,{items:a(T),disabled:a(f),onToggle:C[0]||(C[0]=j=>a(d)[j].value=!a(d)[j].value)},null,8,["items","disabled"])])]),default:p(()=>[S("div",et,null,512)]),_:1},512)}}}),at=W(tt,[["__scopeId","data-v-20ce05e9"]]),ot=N({__name:"ChartSupplyDistribution",setup(e){const{data:t}=ge(),o=ne(),s=b(()=>t.value?[t.value.circulatingSupply,t.value.permaStaked,t.value.redemptionVesting,t.value.airdropVesting,t.value.treasuryVesting,t.value.licensingVesting]:[]),r=["Circulating Supply","Perma Staked","Redemption Vesting","Airdrop Vesting","Treasury Vesting","Licensing Vesting"],n=b(()=>({chart:{type:"pie",height:350},colors:[`${o.value.colorsArray[0]}88`,`${o.value.colorsArray[2]}88`,`${o.value.colorsArray[1]}88`,`${o.value.colorsArray[3]}88`,`${o.value.colorsArray[4]}88`,`${o.value.colorsArray[0]}aa`],labels:r,legend:{labels:{colors:o.value.colors.text}}}));return(T,d)=>{const f=$e,q=ae;return y(),V(q,{ref:"supplyCard",title:"Token Supply Distribution"},{default:p(()=>[i(f,{options:n.value,series:s.value},null,8,["options","series"])]),_:1},512)}}}),st={class:"kpis"},rt=N({__name:"KPIs",setup(e){const t={chain:"ethereum"},{data:o}=pe(t),{data:s}=me(t),{data:r}=de(t),{data:n}=ge(),T=b(()=>!o.value||!s.value||!r.value?null:o.value.totalAllocation+s.value.totalAllocation+r.value.totalAllocation),d=b(()=>!o.value||!s.value||!r.value?null:o.value.totalClaimed+s.value.totalClaimed+r.value.totalClaimed),f=b(()=>!T.value||!d.value?null:d.value/T.value*100);return(q,g)=>{var x;const A=le,_=je;return y(),ie("div",st,[i(_,{label:"Total Allocated","has-value":!!a(T)},{default:p(()=>[i(A,{type:"dollar",value:a(T),precision:2,"show-symbol":!1},null,8,["value"]),g[0]||(g[0]=Y(" reUSD "))]),_:1},8,["has-value"]),i(_,{label:"Total Claimed","has-value":!!a(d)},{default:p(()=>[i(A,{type:"dollar",value:a(d),precision:2,"show-symbol":!1},null,8,["value"]),g[1]||(g[1]=Y(" reUSD "))]),_:1},8,["has-value"]),i(_,{label:"Claim Percentage","has-value":!!a(f)},{default:p(()=>[i(A,{type:"percentage",value:a(f),precision:2},null,8,["value"])]),_:1},8,["has-value"]),i(_,{label:"Circulating Supply","has-value":!!((x=a(n))!=null&&x.circulatingSupply)},{default:p(()=>{var c;return[i(A,{type:"dollar",value:(c=a(n))==null?void 0:c.circulatingSupply,precision:2,"show-symbol":!1},null,8,["value"]),g[2]||(g[2]=Y(" reUSD "))]}),_:1},8,["has-value"])])}}}),nt=W(rt,[["__scopeId","data-v-01b8fbf1"]]),it={class:"end"},lt={class:"end"},ct={class:"end"},B=10,ut=N({__name:"TableVesting",setup(e){const t={chain:"ethereum"},{data:o}=pe(t),{data:s}=me(t),{data:r}=de(t),n=Ae(0),T=[{id:"date",label:"Date",sort:!0},{id:"value",label:"RSUP",sort:!0,align:"end"}],d=[{id:"date",label:"Date",sort:!0},{id:"value",label:"RSUP",sort:!0,align:"end"}],{sorting:f,onSort:q}=te("date"),{sorting:g,onSort:A}=te("date"),{sorting:_,onSort:x}=te("date"),c=b(()=>{var u;return(((u=o.value)==null?void 0:u.history)??[]).orderBy(v=>{switch(f.value.column){case"date":return v.timestamp.getTime();case"value":return v.value;default:return 0}},f.value.order)}),C=b(()=>{var u;return(((u=s.value)==null?void 0:u.history)??[]).orderBy(v=>{switch(g.value.column){case"date":return v.timestamp.getTime();case"value":return v.value;default:return 0}},g.value.order)}),w=b(()=>{var u;return(((u=r.value)==null?void 0:u.history)??[]).orderBy(v=>{switch(_.value.column){case"date":return v.timestamp.getTime();case"value":return v.value;default:return 0}},_.value.order)}),{page:$,rowsPage:K,onPage:j}=ee(c,B),{page:l,rowsPage:k,onPage:J}=ee(C,B),{page:O,rowsPage:E,onPage:H}=ee(w,B);return(u,v)=>{const Q=De,_e=Re,G=Fe,M=le,X=ke,ve=ae;return y(),V(ve,null,{title:p(()=>[i(_e,{active:a(n),onTab:v[0]||(v[0]=P=>n.value=P.index)},{default:p(()=>[i(Q,{header:"Redemptions"}),i(Q,{header:"Team Airdrops"}),i(Q,{header:"Victims Airdrops"})]),_:1},8,["active"])]),actions:p(()=>[a(n)===0?(y(),V(G,{key:0,"items-count":a(c).length,"items-per-page":B,page:a($),onPage:a(j)},null,8,["items-count","page","onPage"])):L("",!0),a(n)===1?(y(),V(G,{key:1,"items-count":a(C).length,"items-per-page":B,page:a(l),onPage:a(J)},null,8,["items-count","page","onPage"])):L("",!0),a(n)===2?(y(),V(G,{key:2,"items-count":a(w).length,"items-per-page":B,page:a(O),onPage:a(H)},null,8,["items-count","page","onPage"])):L("",!0)]),default:p(()=>[a(n)===0?(y(),V(X,{key:0,class:"redemptions-table",rows:a(K),columns:T,sorting:a(f),onSortColumn:a(q)},{row:p(({item:P})=>[S("div",null,Z(P.timestamp.toLocaleDateString()),1),S("div",it,[i(M,{type:"dollar",value:P.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):L("",!0),a(n)===1?(y(),V(X,{key:1,class:"airdrops-table",rows:a(k),columns:d,sorting:a(g),onSortColumn:a(A)},{row:p(({item:P})=>[S("div",null,Z(P.timestamp.toLocaleDateString()),1),S("div",lt,[i(M,{type:"dollar",value:P.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):L("",!0),a(n)===2?(y(),V(X,{key:2,class:"airdrops-table",rows:a(E),columns:d,sorting:a(_),onSortColumn:a(x)},{row:p(({item:P})=>[S("div",null,Z(P.timestamp.toLocaleDateString()),1),S("div",ct,[i(M,{type:"dollar",value:P.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):L("",!0)]),_:1})}}}),pt=W(ut,[["__scopeId","data-v-e865bdd4"]]),mt={class:"dashboard"},dt=N({__name:"Vesting.page",setup(e){return(t,o)=>{const s=ye;return y(),ie("div",mt,[i(s,{style:{"grid-area":"header"},title:"Vesting",description:"Token vesting, distribution, and circulating supply metrics"}),i(nt,{style:{"grid-area":"highlights"}}),i(at,{style:{"grid-area":"projections"}}),i(ot,{style:{"grid-area":"supply"}}),i(pt,{style:{"grid-area":"table"}})])}}}),$t=W(dt,[["__scopeId","data-v-3a8096d7"]]);export{$t as default};
