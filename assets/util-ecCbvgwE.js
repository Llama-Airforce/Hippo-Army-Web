import{z as r,t as l,e as c,p as y,g as p}from"./timestamp-D1DOFXxn.js";import{f as _,a as k}from"./fetch-CzIKldv6.js";import{u as m}from"./Number-JCDnKITR.js";import{p as f}from"./Pagination-vgbH7lYO.js";import{ar as u}from"./index--6aQy66t.js";const v=r.object({name:r.string(),protocol_id:r.number(),pairs_count:r.number(),active_positions_count:r.number(),total_collateral:r.string(),total_debt:r.string()}).transform(e=>({name:e.name,protocolId:e.protocol_id,pairsCount:e.pairs_count,activePositionsCount:e.active_positions_count,totalCollateral:parseFloat(e.total_collateral),totalDebt:parseFloat(e.total_debt)})),d=r.object({protocols:r.array(v),count:r.number()}).transform(e=>({protocols:e.protocols,count:e.count})),a=r.object({symbol:r.string(),name:r.string(),address:r.string(),precision:r.number()}).transform(e=>({symbol:e.symbol,name:e.name,address:e.address,precision:e.precision})),F=r.object({token_address:r.string(),token_symbol:r.string(),apr:r.string()}).transform(e=>({tokenAddress:e.token_address,tokenSymbol:e.token_symbol,apr:parseFloat(e.apr)})),w=r.object({pair_id:r.number(),name:r.string(),address:r.string(),total_collateral:r.string(),total_underlying:r.string(),exchange_rate:r.string(),total_debt:r.string(),active_positions_count:r.number(),borrow_limit:r.string(),utilization_rate:r.string(),interest_rate:r.string(),claimable_fees:r.string(),claimable_other_fees:r.string(),block_timestamp:r.number(),last_redemption:r.number().nullable(),redemption_fee_10k:r.string(),borrow_cost_apr:r.string(),base_apr:r.string(),rewards:r.array(F),collateral_token:a,debt_token:a,underlying_token:a,pair_collateral_token:a,pair_underlying_token:a}).transform(e=>({pairId:e.pair_id,name:e.name,address:e.address,totalCollateral:parseFloat(e.total_collateral),totalUnderlying:parseFloat(e.total_underlying),exchangeRate:parseFloat(e.exchange_rate),totalDebt:parseFloat(e.total_debt),activePositionsCount:e.active_positions_count,borrowLimit:parseFloat(e.borrow_limit),utilizationRate:parseFloat(e.utilization_rate),interestRate:parseFloat(e.interest_rate),claimableFees:parseFloat(e.claimable_fees),claimableOtherFees:parseFloat(e.claimable_other_fees),blockTime:l(e.block_timestamp),lastRedemption:e.last_redemption?l(e.last_redemption):null,redemptionFee10k:parseFloat(e.redemption_fee_10k),aprBorrowCost:parseFloat(e.borrow_cost_apr),aprBase:parseFloat(e.base_apr),rewards:e.rewards,tokenCollateral:e.collateral_token,tokenDebt:e.debt_token,tokenUnderlying:e.underlying_token,tokenPairCollateral:e.pair_collateral_token,tokenPairUnderyling:e.pair_underlying_token})),h=r.object({pairs:r.array(w),count:r.number(),page:r.number(),total_pages:r.number()}).transform(e=>({pairs:e.pairs,count:e.count,page:e.page,totalPages:e.total_pages})),P=r.object(c);async function C(e,t){const n=p(),{chain:o}=P.parse(e),s=await _(`${n}/v1/protocols/overview/${o}`,void 0,t==null?void 0:t.signal);return d.parse(s)}const j=r.object({...c,...y,protocol_name:r.string()});async function D(e,t){const n=p(),{chain:o,protocol_name:s,...i}=j.parse(e),b=k(i),g=await _(`${n}/v1/protocols/${o}/${s}/pairs${b}`,void 0,t==null?void 0:t.signal);return h.parse(g)}function Q(e){return m({queryKey:["protocols-overview",e],queryFn:()=>C(u(e))})}function I(e,t){return m({queryKey:["protocols-pairs",e],queryFn:()=>f((o,s)=>D({...u(e),page:o,per_page:s}).then(i=>i.pairs),1,100),enabled:t})}function N(e){const t=e.match(/\((CurveLend|Fraxlend): ([^)]+)\) - (\d+)/);if(!t)return e;const n=t[2],o=parseInt(t[3],10);return o>1?`${n} (#${o})`:n}export{Q as a,N as p,I as u};
