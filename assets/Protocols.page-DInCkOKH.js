import{a as E,_ as H}from"./TabItem.vue_vue_type_script_setup_true_lang-B-6dAmy-.js";import{_ as K}from"./DashboardHeader-BZxATxlq.js";import{_ as j}from"./KPI-BvSL3471.js";import{_ as S}from"./AsyncValue-Brd_Goit.js";import{a as q,b as G}from"./protocols-Dq__jjai.js";import{d as y,b as _,o as l,aE as O,am as J,l as P,c as b,t as M,aF as Q,e as c,g as o,h as e,f,m as k,k as R,_ as W,j as B,aG as X,aH as Y,ay as Z,aq as ee,aI as oe,aD as N,aB as I}from"./index-C4bxLmri.js";import{_ as ae}from"./Table-CDZZfuyN.js";import{_ as te}from"./TokenIcon-BrxJzf5E.js";import{u as ne,_ as se}from"./UsePagination-C4qACSg2.js";import{p as T,a as re}from"./UseTabNavigation-DJjOj5ia.js";import{u as le}from"./UseSort-iNK8y2vW.js";import"./Tooltip-DPMfqQ_8.js";import"./Number-D-_ywgC3.js";import"./Pagination-vgbH7lYO.js";const ce=y({__name:"IconExpander",props:{expanded:{type:Boolean,default:!1}},setup(p){return(s,d)=>{const n=O;return l(),_(n,{class:J(["expander",{expanded:s.expanded}])},null,8,["class"])}}}),ie=P(ce,[["__scopeId","data-v-7caf48cb"]]),ue={class:"token"},_e={class:"end",style:{display:"flex",gap:"1ch"}},pe={class:"end"},de={class:"end"},L=20,me=y({__name:"TablePairs",props:{protocolName:{}},setup(p){const{isFetching:s,data:d}=q(M(()=>({chain:"ethereum",protocol_name:p.protocolName||""})),b(()=>!!p.protocolName)),n=b(()=>{var r;return(r=d.value)==null?void 0:r.filter(h=>h.borrowLimit>0)}),m=["","",{id:"name",label:"Name",sort:!0},{id:"tvl",label:"TVL",sort:!0,align:"end"},{id:"rate",label:"Interest Rate",sort:!0,align:"end"},{id:"util",label:"Util",sort:!0,align:"end"}],{sorting:t,onSort:i}=le("tvl"),u=b(()=>(n.value??[]).orderBy(r=>{switch(t.value.column){case"name":return T(r.name);case"tvl":return r.totalCollateral;case"rate":return r.interestRate;case"util":return r.utilizationRate}},t.value.order)),{page:g,rowsPage:a,onPage:w}=ne(u,L),x=Q(),V=async r=>{var h;await x.push({name:"pair",params:{protocolName:(h=p.protocolName)==null?void 0:h.toLocaleLowerCase(),pairId:r.pairId.toString()}})};return(r,h)=>{const U=se,z=ie,D=te,C=S,A=ae,F=W;return l(),_(F,{title:"Pairs",loading:e(s)},{actions:c(()=>[o(U,{"items-count":e(u).length,"items-per-page":L,page:e(g),onPage:e(w)},null,8,["items-count","page","onPage"])]),default:c(()=>[o(A,{class:"pairs-table",rows:e(a),columns:m,sorting:e(t),onSortColumn:e(i),onSelect:V},{row:c(({item:v})=>[o(z),f("div",ue,[(l(),_(D,{key:v.tokenPairCollateral.symbol,chain:"ethereum",address:v.tokenPairCollateral.address},null,8,["address"]))]),f("div",null,k(e(T)(v.name)),1),f("div",_e,[o(C,{"show-zero":"",type:"dollar",value:v.totalCollateral/10**21,precision:2,"show-symbol":!1},null,8,["value"]),R(" "+k(v.tokenUnderlying.symbol),1)]),f("div",pe,[o(C,{"show-zero":"",type:"percentage",value:v.interestRate/10**8,precision:2},null,8,["value"])]),f("div",de,[o(C,{"show-zero":"",type:"percentage",value:v.utilizationRate,precision:2},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])]),_:1},8,["loading"])}}}),ve=P(me,[["__scopeId","data-v-b2878653"]]),ge={class:"dashboard-grid"},fe={class:"kpis"},he=y({__name:"Protocol",props:{protocol:{}},setup(p){const{isFetching:s,data:d}=G({chain:"ethereum"}),n=b(()=>{var m;return(((m=d.value)==null?void 0:m.protocols)??[]).find(t=>t.name.toLocaleLowerCase()===p.protocol)});return(m,t)=>{var g;const i=S,u=j;return l(),B("div",ge,[f("div",fe,[o(u,{label:"Pairs","has-value":!e(s)},{default:c(()=>{var a;return[o(i,{value:(a=e(n))==null?void 0:a.pairsCount,precision:0},null,8,["value"])]}),_:1},8,["has-value"]),o(u,{label:"Total collateral","has-value":!e(s)},{default:c(()=>{var a;return[o(i,{type:"dollar",value:(a=e(n))!=null&&a.totalUnderlying?e(n).totalUnderlying:void 0,precision:2},null,8,["value"])]}),_:1},8,["has-value"]),o(u,{label:"Total debt","has-value":!e(s)},{default:c(()=>{var a;return[o(i,{value:(a=e(n))==null?void 0:a.totalDebt,precision:0},null,8,["value"]),t[0]||(t[0]=R(" reUSD "))]}),_:1},8,["has-value"])]),o(ve,{"protocol-name":(g=e(n))==null?void 0:g.name},null,8,["protocol-name"])])}}}),$=P(he,[["__scopeId","data-v-c04efca5"]]),be={key:1,class:"dashboard"},ye=y({__name:"Protocols.page",setup(p){const{tabActive:s,tabActiveIndex:d}=re(["curvelend","fraxlend"],"protocols",void 0,{tabParamName:"protocolName"}),{crumbs:n}=X(Y()),m=Z();return ee(()=>m.name,t=>{t!=="pair"&&(n.value=[{id:"protocols",label:"Protocols",pathName:"protocols"}])},{immediate:!0}),(t,i)=>{const u=oe("router-view"),g=K,a=E,w=H;return t.$route.name==="pair"?(l(),_(u,{key:0})):(l(),B("div",be,[o(g,{style:{"grid-area":"header"},title:"Protocols",description:"Lending markets metrics for Curve Lend and Frax Lend protocols"}),o(w,{active:e(d),onTab:i[0]||(i[0]=x=>d.value=x.index)},{default:c(()=>[o(a,{header:"Curve Lend"},{default:c(()=>[(l(),_(N,null,[e(s)==="curvelend"?(l(),_($,{key:0,protocol:"curvelend"})):I("",!0)],1024))]),_:1}),o(a,{header:"Frax Lend"},{default:c(()=>[(l(),_(N,null,[e(s)==="fraxlend"?(l(),_($,{key:0,protocol:"fraxlend"})):I("",!0)],1024))]),_:1})]),_:1},8,["active"])]))}}}),Ue=P(ye,[["__scopeId","data-v-90d9b0e2"]]);export{Ue as default};
