import{_ as Pe}from"./DashboardHeader-DhClZnbZ.js";import{am as I,d as K,u as ae,c as y,a as Ae,w as be,b,o as v,e as m,f as T,g as i,h as o,_ as H,l as O,j as ue,k as Y,ai as Se,an as L,m as Z}from"./index-UmqmIgTN.js";import{b as Te,u as Ve,a as Ce,d as $e,_ as we}from"./UseLightweightChart-B1yjCTma.js";import{o as h,n as W,s as u,t as pe,b as oe,l as U,g as R,f as D,a as q,r as se,u as re}from"./timestamp-CCR-hA16.js";import{_ as me}from"./ChartApex-SRyd9ySA.js";import{_ as ke}from"./KPI-qesR9utL.js";import{_ as de}from"./AsyncValue-CvWZqNRo.js";import{_ as je}from"./Table-CthoDSZD.js";import{u as ee,_ as Fe}from"./UsePagination-DOoZmtGP.js";import{_ as Re,a as De}from"./TabItem.vue_vue_type_script_setup_true_lang-Clu7z8cJ.js";import{u as te}from"./UseSort-DGXK62L5.js";import"./Tooltip-Db5C-dpH.js";const ne=h({value:u(),timestamp:W()}).transform(e=>({value:parseFloat(e.value),timestamp:pe(e.timestamp)})),qe=h({total_allocation:u(),claim_count:W(),total_claimed:u(),history:oe(ne),total_redeemed:u()}).transform(e=>({totalAllocation:parseFloat(e.total_allocation),claimCount:e.claim_count,totalClaimed:parseFloat(e.total_claimed),history:e.history,totalRedeemed:parseFloat(e.total_redeemed)})),ie=h({projection:oe(ne),total_vested:u(),current_unlocked:u(),current_timestamp:W()}).transform(e=>({projection:e.projection,totalVested:parseFloat(e.total_vested),unlocked:parseFloat(e.current_unlocked),time:pe(e.current_timestamp)})),_e=h({total_allocation:u(),claim_count:W(),total_claimed:u(),history:oe(ne)}).transform(e=>({totalAllocation:parseFloat(e.total_allocation),claimCount:e.claim_count,totalClaimed:parseFloat(e.total_claimed),history:e.history})),xe=h({total_supply:u(),perma_staked:u(),total_staked:u(),effective_perma_staked:u(),cooldown_staked:u(),airdrop_vesting:u(),redemption_vesting:u(),treasury_vesting:u(),licensing_vesting:u(),circulating_supply:u(),lp_balance:u()}).transform(e=>({totalSupply:parseFloat(e.total_supply),permaStaked:parseFloat(e.perma_staked),totalStaked:parseFloat(e.total_staked),effectivePermaStaked:parseFloat(e.effective_perma_staked),cooldownStaked:parseFloat(e.cooldown_staked),airdropVesting:parseFloat(e.airdrop_vesting),redemptionVesting:parseFloat(e.redemption_vesting),treasuryVesting:parseFloat(e.treasury_vesting),licensingVesting:parseFloat(e.licensing_vesting),circulatingSupply:parseFloat(e.circulating_supply),lpBalance:parseFloat(e.lp_balance)})),Le=h({...U});async function Be(e,t){const a=R(t),{chain:s}=Le.parse(e),r=await D(`${a}/v1/vesting/${s}/redemptions`,void 0,t?.signal);return qe.parse(r)}const Ie=h({...U});async function Ke(e,t){const a=R(t),{chain:s}=Ie.parse(e),r=await D(`${a}/v1/vesting/${s}/redemptions/projection`,void 0,t?.signal);return ie.parse(r)}const Oe=h({...U});async function Ue(e,t){const a=R(t),{chain:s}=Oe.parse(e),r=await D(`${a}/v1/vesting/${s}/airdrops/team`,void 0,t?.signal);return _e.parse(r)}const Ne=h({...U});async function Ee(e,t){const a=R(t),{chain:s}=Ne.parse(e),r=await D(`${a}/v1/vesting/${s}/airdrops/team/projection`,void 0,t?.signal);return ie.parse(r)}const He=h({...U});async function We(e,t){const a=R(t),{chain:s}=He.parse(e),r=await D(`${a}/v1/vesting/${s}/airdrops/victims`,void 0,t?.signal);return _e.parse(r)}const Je=h({...U});async function Qe(e,t){const a=R(t),{chain:s}=Je.parse(e),r=await D(`${a}/v1/vesting/${s}/airdrops/victims/projection`,void 0,t?.signal);return ie.parse(r)}async function ze(e){const t=R(e),a=await D(`${t}/v1/vesting/circulating_supply`,void 0,e?.signal);return xe.parse(a)}function ge(e){return q({queryKey:["vesting-redemptions",e],queryFn:()=>Be(I(e))})}function Ge(e){return q({queryKey:["vesting-redemptions-projection",e],queryFn:()=>Ke(I(e))})}function ve(e){return q({queryKey:["vesting-airdrops-team",e],queryFn:()=>Ue(I(e))})}function Me(e){return q({queryKey:["vesting-airdrops-team-projection",e],queryFn:()=>Ee(I(e))})}function ye(e){return q({queryKey:["vesting-airdrops-victims",e],queryFn:()=>We(I(e))})}function Xe(e){return q({queryKey:["vesting-airdrops-victims-projection",e],queryFn:()=>Qe(I(e))})}function le(){return q({queryKey:["vesting-circulating-supply"],queryFn:()=>ze()})}const Ye={style:{display:"flex"}},Ze={class:"actions-secondary"},et={ref:"chartRef",class:"chart"},tt=K({__name:"ChartProjections",setup(e){const t={chain:"ethereum"},{data:a}=Ge(t),{data:s}=Me(t),{data:r}=Xe(t),n=ae(),{items:c,toggles:p,disabled:g}=Te(()=>[{id:"victimsAirdrops",label:"Victims Airdrops",color:n.value.colorsArray[2],togglable:!0},{id:"teamAirdrops",label:"Team Airdrops",color:n.value.colorsArray[1],togglable:!0},{id:"redemptions",label:"Redemptions",color:n.value.colorsArray[0],togglable:!0}]),V=y(()=>{if(!a.value||!s.value||!r.value)return[];const d=new Set;for(const l of a.value.projection)d.add(l.timestamp.getTime());for(const l of s.value.projection)d.add(l.timestamp.getTime());for(const l of r.value.projection)d.add(l.timestamp.getTime());const $=Array.from(d).sort(),C=r.value.projection.map(l=>({time:l.timestamp.getTime(),value:l.value})).sort((l,j)=>l.time-j.time),w=s.value.projection.map(l=>({time:l.timestamp.getTime(),value:l.value})).sort((l,j)=>l.time-j.time);let x=C.length>0?C[C.length-1].value:0,k=w.length>0?w[w.length-1].value:0;return $.map(l=>{const j=new Date(l),Q=a.value.projection.find(F=>F.timestamp.getTime()===l)?.value||0,N=s.value.projection.find(F=>F.timestamp.getTime()===l);N&&(k=N.value);const E=r.value.projection.find(F=>F.timestamp.getTime()===l);return E&&(x=E.value),{time:j.getUTCTimestamp(),values:[p.victimsAirdrops.value?x:0,p.teamAirdrops.value?k:0,p.redemptions.value?Q:0]}})}),_=Ae("card"),{chart:P,series:f}=Ve({createChartOptions:Ce(),series:{type:"StackedArea",name:"stacked",options:y(()=>({priceFormat:{type:"custom",formatter:d=>`${se(d,0,"dollar")}${re(d)}`},colors:[{line:n.value.colorsArray[2],area:`${n.value.colorsArray[2]}33`},{line:n.value.colorsArray[1],area:`${n.value.colorsArray[1]}33`},{line:n.value.colorsArray[0],area:`${n.value.colorsArray[0]}33`}],lineWidth:2,lastValueVisible:!1,priceLineVisible:!1}))}});be(J);function J(){if(!P.value||!f.stacked)return;const d=V.value;d.length>0&&f.stacked.setData(d),P.value.timeScale().fitContent()}return(d,$)=>{const C=we,w=$e,x=H;return v(),b(x,{ref_key:"card",ref:_,title:"Vesting Projections",class:"stack-actions"},{actions:m(()=>[T("div",Ye,[i(C,{chart:o(P),target:o(_)},null,8,["chart","target"])])]),"actions-secondary":m(()=>[T("div",Ze,[i(w,{items:o(c),disabled:o(g),onToggle:$[0]||($[0]=k=>o(p)[k].value=!o(p)[k].value)},null,8,["items","disabled"])])]),default:m(()=>[T("div",et,null,512)]),_:1},512)}}}),at=O(tt,[["__scopeId","data-v-20ce05e9"]]),ot=K({__name:"ChartSupplyCirculating",setup(e){const{data:t}=le(),a=ae(),s=y(()=>{if(!t.value)return[];const c=[t.value.cooldownStaked,t.value.effectivePermaStaked,t.value.totalStaked-t.value.effectivePermaStaked,t.value.lpBalance];return[...c,t.value.circulatingSupply-c.sumBy(p=>p)]}),r=["Staking cooldown","Perma staked","Normal staked","LP balance","Other"],n=y(()=>({chart:{type:"pie"},colors:[`${a.value.colorsArray[0]}88`,`${a.value.colorsArray[2]}88`,`${a.value.colorsArray[1]}88`,`${a.value.colorsArray[3]}88`,`${a.value.colorsArray[4]}88`],labels:r,legend:{labels:{colors:a.value.colors.text}},tooltip:{y:{formatter:c=>`${se(c,2,"dollar")}${re(c)}`}}}));return(c,p)=>{const g=me,V=H;return v(),b(V,{ref:"supplyCard",title:"Token Supply Circulating"},{default:m(()=>[i(g,{options:n.value,series:s.value},null,8,["options","series"])]),_:1},512)}}}),st=O(ot,[["__scopeId","data-v-19066ed0"]]),rt=K({__name:"ChartSupplyDistribution",setup(e){const{data:t}=le(),a=ae(),s=y(()=>t.value?[t.value.circulatingSupply,t.value.permaStaked,t.value.redemptionVesting,t.value.airdropVesting,t.value.treasuryVesting,t.value.licensingVesting]:[]),r=["Circulating Supply","Perma Staked","Redemption Vesting","Airdrop Vesting","Treasury Vesting","Licensing Vesting"],n=y(()=>({chart:{type:"pie"},colors:[`${a.value.colorsArray[0]}88`,`${a.value.colorsArray[2]}88`,`${a.value.colorsArray[1]}88`,`${a.value.colorsArray[3]}88`,`${a.value.colorsArray[4]}88`,`${a.value.colorsArray[0]}aa`],labels:r,legend:{labels:{colors:a.value.colors.text}},tooltip:{y:{formatter:c=>`${se(c,2,"dollar")}${re(c)}`}}}));return(c,p)=>{const g=me,V=H;return v(),b(V,{ref:"supplyCard",title:"Token Supply Distribution"},{default:m(()=>[i(g,{options:n.value,series:s.value},null,8,["options","series"])]),_:1},512)}}}),nt=O(rt,[["__scopeId","data-v-d288452a"]]),it={class:"kpis"},lt=K({__name:"KPIs",setup(e){const t={chain:"ethereum"},{data:a}=ge(t),{data:s}=ve(t),{data:r}=ye(t),{data:n}=le(),c=y(()=>!a.value||!s.value||!r.value?null:a.value.totalAllocation+s.value.totalAllocation+r.value.totalAllocation),p=y(()=>!a.value||!s.value||!r.value?null:a.value.totalClaimed+s.value.totalClaimed+r.value.totalClaimed),g=y(()=>!c.value||!p.value?null:p.value/c.value*100);return(V,_)=>{const P=de,f=ke;return v(),ue("div",it,[i(f,{label:"Total Allocated","has-value":!!o(c)},{default:m(()=>[i(P,{type:"dollar",value:o(c),precision:2,"show-symbol":!1},null,8,["value"]),_[0]||(_[0]=Y(" RSUP "))]),_:1,__:[0]},8,["has-value"]),i(f,{label:"Total Claimed","has-value":!!o(p)},{default:m(()=>[i(P,{type:"dollar",value:o(p),precision:2,"show-symbol":!1},null,8,["value"]),_[1]||(_[1]=Y(" RSUP "))]),_:1,__:[1]},8,["has-value"]),i(f,{label:"Claim Percentage","has-value":!!o(g)},{default:m(()=>[i(P,{type:"percentage",value:o(g),precision:2},null,8,["value"])]),_:1},8,["has-value"]),i(f,{label:"Circulating Supply","has-value":!!o(n)?.circulatingSupply},{default:m(()=>[i(P,{type:"dollar",value:o(n)?.circulatingSupply,precision:2,"show-symbol":!1},null,8,["value"]),_[2]||(_[2]=Y(" RSUP "))]),_:1,__:[2]},8,["has-value"])])}}}),ct=O(lt,[["__scopeId","data-v-d9b5eace"]]),ut={class:"end"},pt={class:"end"},mt={class:"end"},B=10,dt=K({__name:"TableVesting",setup(e){const t={chain:"ethereum"},{data:a}=ge(t),{data:s}=ve(t),{data:r}=ye(t),n=Se(0),c=[{id:"date",label:"Date",sort:!0},{id:"value",label:"RSUP",sort:!0,align:"end"}],p=[{id:"date",label:"Date",sort:!0},{id:"value",label:"RSUP",sort:!0,align:"end"}],{sorting:g,onSort:V}=te("date"),{sorting:_,onSort:P}=te("date"),{sorting:f,onSort:J}=te("date"),d=y(()=>(a.value?.history??[]).orderBy(S=>{switch(g.value.column){case"date":return S.timestamp.getTime();case"value":return S.value;default:return 0}},g.value.order)),$=y(()=>(s.value?.history??[]).orderBy(S=>{switch(_.value.column){case"date":return S.timestamp.getTime();case"value":return S.value;default:return 0}},_.value.order)),C=y(()=>(r.value?.history??[]).orderBy(S=>{switch(f.value.column){case"date":return S.timestamp.getTime();case"value":return S.value;default:return 0}},f.value.order)),{page:w,rowsPage:x,onPage:k}=ee(d,B),{page:l,rowsPage:j,onPage:Q}=ee($,B),{page:N,rowsPage:E,onPage:F}=ee(C,B);return(S,ce)=>{const z=De,fe=Re,G=Fe,M=de,X=je,he=H;return v(),b(he,null,{title:m(()=>[i(fe,{active:o(n),onTab:ce[0]||(ce[0]=A=>n.value=A.index)},{default:m(()=>[i(z,{header:"Redemptions"}),i(z,{header:"Team Airdrops"}),i(z,{header:"Victims Airdrops"})]),_:1},8,["active"])]),actions:m(()=>[o(n)===0?(v(),b(G,{key:0,"items-count":o(d).length,"items-per-page":B,page:o(w),onPage:o(k)},null,8,["items-count","page","onPage"])):L("",!0),o(n)===1?(v(),b(G,{key:1,"items-count":o($).length,"items-per-page":B,page:o(l),onPage:o(Q)},null,8,["items-count","page","onPage"])):L("",!0),o(n)===2?(v(),b(G,{key:2,"items-count":o(C).length,"items-per-page":B,page:o(N),onPage:o(F)},null,8,["items-count","page","onPage"])):L("",!0)]),default:m(()=>[o(n)===0?(v(),b(X,{key:0,class:"redemptions-table",rows:o(x),columns:c,sorting:o(g),onSortColumn:o(V)},{row:m(({item:A})=>[T("div",null,Z(A.timestamp.toLocaleDateString()),1),T("div",ut,[i(M,{type:"dollar",value:A.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):L("",!0),o(n)===1?(v(),b(X,{key:1,class:"airdrops-table",rows:o(j),columns:p,sorting:o(_),onSortColumn:o(P)},{row:m(({item:A})=>[T("div",null,Z(A.timestamp.toLocaleDateString()),1),T("div",pt,[i(M,{type:"dollar",value:A.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):L("",!0),o(n)===2?(v(),b(X,{key:2,class:"airdrops-table",rows:o(E),columns:p,sorting:o(f),onSortColumn:o(J)},{row:m(({item:A})=>[T("div",null,Z(A.timestamp.toLocaleDateString()),1),T("div",mt,[i(M,{type:"dollar",value:A.value,precision:2,"show-symbol":!1},null,8,["value"])])]),_:1},8,["rows","sorting","onSortColumn"])):L("",!0)]),_:1})}}}),_t=O(dt,[["__scopeId","data-v-8989e3b9"]]),gt={class:"dashboard"},vt=K({__name:"Vesting.page",setup(e){return(t,a)=>{const s=Pe;return v(),ue("div",gt,[i(s,{style:{"grid-area":"header"},title:"Vesting",description:"Token vesting, distribution, and circulating supply metrics"}),i(ct,{style:{"grid-area":"highlights"}}),i(nt,{style:{"grid-area":"supply-distribution"}}),i(st,{style:{"grid-area":"supply-circulating"}}),i(at,{style:{"grid-area":"projections"}}),i(_t,{style:{"grid-area":"table"}})])}}}),kt=O(vt,[["__scopeId","data-v-5c2ac941"]]);export{kt as default};
