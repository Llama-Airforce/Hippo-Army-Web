import{r as h,d as y,b as _,o as b,az as v,e as w,g}from"./index-eREEKl5L.js";/**
 * @license lucide-vue-next v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=h("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),B=y({__name:"BtnChartLWExport",props:{filename:{},series:{}},setup(d){function m(e){if(typeof e=="number")return e;if(typeof e=="string")return Math.floor(new Date(e).getTime()/1e3);if(typeof e=="object"&&"year"in e){const{year:a,month:o,day:n}=e;return Math.floor(new Date(a,o-1,n).getTime()/1e3)}throw new Error("Invalid time format")}function l(e){return Object.entries(e).map(([a,o])=>({column:a,data:((o==null?void 0:o.data())??[]).map(n=>({time:m(n.time),value:"value"in n?n.value:0}))}))}function u(){const e=l(d.series),a=e.flatMap(t=>t.data.map(c=>({column:t.column,data:c}))).groupBy(t=>t.data.time).entries().orderBy(([t])=>Number(t)).map(([t,c])=>{const f=c.orderBy(s=>s.column).map(s=>s.data.value).join(";");return`${t};${f}`}),n=["time;"+e.map(t=>t.column).orderBy(t=>t).join(";"),...a].join(`
`),p=new Blob([n],{type:"text/csv;charset=utf-8"}),i=URL.createObjectURL(p),r=document.createElement("a");r.href=i,r.download=`${d.filename}.csv`,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)}return(e,a)=>{const o=k,n=v;return b(),_(n,{onClick:u},{default:w(()=>[g(o)]),_:1})}}});export{B as _};
